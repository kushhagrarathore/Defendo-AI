import{u as H,b as ve,a as we,r as g,j as e,L as O,s as R,R as _e,e as z,f as Ce}from"./index-221e5e32.js";import{B as Se}from"./BrandLogo-c222ccf7.js";import{h as w}from"./motion-cb67fe8f.js";import{A as ke}from"./index-cfdf0eb9.js";const se="#DAA520",Ee="#F7F7F7",V=({children:x})=>{var c,b,P,$;const{user:v,profile:f,signOut:_}=H(),u=ve(),o=we(),[L,C]=g.useState(!1),[A,E]=g.useState(""),i=g.useRef(null),S=[{path:"/user-portal",label:"Book Service",icon:"add"},{path:"/user-portal/bookings",label:"My Bookings",icon:"event"}],N=[{path:"/user-portal/dashboard",label:"Dashboard",icon:"dashboard"},{path:"/user-portal/account",label:"Account Settings",icon:"settings"}];g.useEffect(()=>{const r=k=>{i.current&&!i.current.contains(k.target)&&C(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const a=r=>{r.preventDefault(),A.trim()&&o(`/user-portal?search=${encodeURIComponent(A.trim())}`)};return e.jsxs("div",{className:"min-h-screen bg-white",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(O,{to:"/user-portal",className:"cursor-pointer hover:opacity-80 transition-opacity",children:e.jsx(Se,{text:"Defendo",imgClassName:"h-8 w-auto",textClassName:"text-lg font-semibold",className:"flex items-center gap-2"})}),e.jsx("nav",{className:"hidden md:flex items-center gap-1",children:S.map(r=>{const k=u.pathname===r.path||r.path==="/user-portal"&&u.pathname==="/user-portal";return e.jsxs(O,{to:r.path,className:`relative px-4 py-2 rounded-xl text-sm font-medium transition-all ${k?"text-gray-900 bg-gray-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:r.icon}),e.jsx("span",{children:r.label})]}),k&&e.jsx(w.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 rounded-full",style:{backgroundColor:se},layoutId:"activeTab"})]},r.path)})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("form",{onSubmit:a,className:"hidden md:flex items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search services...",value:A,onChange:r=>E(r.target.value),className:"pl-10 pr-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all text-sm w-64",style:{backgroundColor:Ee}}),e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-lg",children:"search"})]}),e.jsx("button",{type:"submit",className:"ml-2 px-4 py-2 rounded-xl text-sm font-medium text-white transition-all hover:shadow-lg",style:{backgroundColor:se},children:"Search"})]}),e.jsxs("button",{className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-gray-600",children:"notifications"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",ref:i,children:[e.jsxs("button",{onClick:()=>C(!L),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all ${u.pathname.startsWith("/user-portal/dashboard")||u.pathname.startsWith("/user-portal/account")?"text-gray-900 bg-gray-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm",children:((b=(c=f==null?void 0:f.full_name)==null?void 0:c[0])==null?void 0:b.toUpperCase())||(($=(P=v==null?void 0:v.email)==null?void 0:P[0])==null?void 0:$.toUpperCase())||"U"}),e.jsx("span",{children:"Account"}),e.jsx("span",{className:"material-symbols-outlined text-base",children:L?"expand_less":"expand_more"})]}),e.jsx(ke,{children:L&&e.jsxs(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",children:[N.map(r=>{const k=u.pathname===r.path;return e.jsxs(O,{to:r.path,onClick:()=>C(!1),className:`flex items-center gap-3 px-4 py-2.5 text-sm transition-colors ${k?"text-gray-900 bg-gray-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:r.icon}),e.jsx("span",{children:r.label}),k&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full",style:{backgroundColor:se}})]},r.path)}),e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsxs("button",{onClick:()=>{C(!1),_()},className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"logout"}),e.jsx("span",{children:"Logout"})]})]})})]})})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-6 py-8",children:x})]})},I="#DAA520",J="#1A1A1A",Le=()=>{const{user:x,profile:v}=H(),[f,_]=g.useState({totalBookings:0,pendingBookings:0,completedBookings:0,totalSpent:0}),[u,o]=g.useState([]),[L,C]=g.useState(!0);g.useEffect(()=>{x!=null&&x.id&&A()},[x==null?void 0:x.id]);const A=async()=>{C(!0);try{const{data:i,error:S}=await R.from("bookings").select("id, status, price, payment_status").eq("user_id",x.id);if(S)throw S;const N=(i==null?void 0:i.length)||0,a=(i==null?void 0:i.filter(r=>r.status==="pending").length)||0,c=(i==null?void 0:i.filter(r=>r.status==="completed").length)||0,b=(i==null?void 0:i.filter(r=>r.payment_status==="paid").reduce((r,k)=>r+(parseFloat(k.price)||0),0))||0;_({totalBookings:N,pendingBookings:a,completedBookings:c,totalSpent:b});const{data:P,error:$}=await R.from("bookings").select(`
          id,
          service_type,
          status,
          date,
          price,
          location,
          host_profiles(company_name, full_name)
        `).eq("user_id",x.id).order("created_at",{ascending:!1}).limit(5);if($)throw $;o(P||[])}catch(i){console.error("Error fetching dashboard data:",i)}finally{C(!1)}},E=[{label:"Total Bookings",value:f.totalBookings,icon:"event",color:"from-blue-500 to-blue-600"},{label:"Pending",value:f.pendingBookings,icon:"hourglass_empty",color:"from-amber-500 to-amber-600"},{label:"Completed",value:f.completedBookings,icon:"check_circle",color:"from-green-500 to-green-600"},{label:"Total Spent",value:`â‚¹${f.totalSpent.toLocaleString("en-IN")}`,icon:"payments",color:"from-purple-500 to-purple-600"}];return e.jsx(V,{children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2",style:{color:J},children:["Welcome back, ",(v==null?void 0:v.full_name)||"User","!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's an overview of your security service bookings"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:E.map((i,S)=>e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.1},className:"bg-white rounded-3xl p-6 border border-gray-200 shadow-sm hover:shadow-lg transition-all",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${i.color} flex items-center justify-center`,children:e.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:i.icon})})}),e.jsx("div",{className:"text-3xl font-bold mb-1",style:{color:J},children:i.value}),e.jsx("div",{className:"text-sm text-gray-500",children:i.label})]},i.label))}),e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-3xl p-6 border border-gray-200 shadow-sm mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:J},children:"Quick Actions"}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[e.jsxs(O,{to:"/user-portal/services",className:"flex items-center gap-3 p-4 rounded-2xl border border-gray-200 hover:border-yellow-400 hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",style:{backgroundColor:`${I}15`},children:e.jsx("span",{className:"material-symbols-outlined",style:{color:I},children:"add"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Book Service"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Find security guards"})]})]}),e.jsxs(O,{to:"/user-portal/bookings",className:"flex items-center gap-3 p-4 rounded-2xl border border-gray-200 hover:border-yellow-400 hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",style:{backgroundColor:`${I}15`},children:e.jsx("span",{className:"material-symbols-outlined",style:{color:I},children:"event"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"My Bookings"}),e.jsx("div",{className:"text-xs text-gray-500",children:"View all bookings"})]})]}),e.jsxs(O,{to:"/user-portal/account",className:"flex items-center gap-3 p-4 rounded-2xl border border-gray-200 hover:border-yellow-400 hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",style:{backgroundColor:`${I}15`},children:e.jsx("span",{className:"material-symbols-outlined",style:{color:I},children:"settings"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Account"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Manage settings"})]})]})]})]}),e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-3xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:J},children:"Recent Bookings"}),e.jsx(O,{to:"/user-portal/bookings",className:"text-sm font-medium",style:{color:I},children:"View All"})]}),L?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx("div",{className:"w-6 h-6 border-3 border-t-transparent rounded-full animate-spin",style:{borderColor:`${I} transparent transparent transparent`}})}):u.length===0?e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"event_busy"}),e.jsx("p",{children:"No bookings yet. Start by booking a service!"})]}):e.jsx("div",{className:"space-y-3",children:u.map(i=>{var S,N;return e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl border border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${I}15`},children:e.jsx("span",{className:"material-symbols-outlined",style:{color:I},children:"security"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:i.service_type?i.service_type.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()):"Security Service"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[((S=i.host_profiles)==null?void 0:S.company_name)||((N=i.host_profiles)==null?void 0:N.full_name)||"Provider"," â€¢"," ",i.date?new Date(i.date).toLocaleDateString("en-IN",{day:"numeric",month:"short"}):"N/A"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold",style:{color:I},children:["â‚¹",i.price||0]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i.status==="completed"?"bg-green-100 text-green-700":i.status==="pending"?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-700"}`,children:i.status})]})]},i.id)})})]})]})})},W="#DAA520",fe="#1A1A1A",Ae=()=>{const{user:x}=H(),[v,f]=g.useState([]),[_,u]=g.useState(!0),[o,L]=g.useState("all");g.useEffect(()=>{x!=null&&x.id&&C()},[x==null?void 0:x.id,o]);const C=async()=>{u(!0);try{let a=R.from("bookings").select(`
          *,
          host_profiles(
            id,
            company_name,
            full_name,
            phone
          )
        `).eq("user_id",x.id).order("created_at",{ascending:!1});o!=="all"&&(a=a.eq("status",o));const{data:c,error:b}=await a;if(b)throw b;f(c||[])}catch(a){console.error("Error fetching bookings:",a)}finally{u(!1)}},A=a=>{switch(a){case"pending":return"bg-amber-100 text-amber-700 border-amber-200";case"confirmed":return"bg-blue-100 text-blue-700 border-blue-200";case"completed":return"bg-green-100 text-green-700 border-green-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},E=a=>{switch(a){case"pending":return"hourglass_empty";case"confirmed":return"check_circle";case"completed":return"done_all";case"cancelled":return"cancel";default:return"info"}},i=a=>a?new Date(a).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A",S=a=>a?new Date(`2000-01-01T${a}`).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"N/A",N=[{value:"all",label:"All Bookings"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];return e.jsx(V,{children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:fe},children:"My Bookings"}),e.jsx("p",{className:"text-gray-600",children:"View and manage all your security service bookings"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:N.map(a=>e.jsx("button",{onClick:()=>L(a.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o===a.value?"text-white shadow-lg":"text-gray-600 bg-white border border-gray-200 hover:bg-gray-50"}`,style:o===a.value?{backgroundColor:W}:{},children:a.label},a.value))}),_?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:`${W} transparent transparent transparent`}})}):v.length===0?e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-20 bg-white rounded-3xl border border-gray-200 p-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 text-4xl",children:"event_busy"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No bookings found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:o==="all"?"You haven't made any bookings yet.":`No ${o} bookings found.`}),e.jsxs("a",{href:"/user-portal",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl text-white font-semibold",style:{backgroundColor:W},children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Book a Service"]})]}):e.jsx("div",{className:"space-y-4",children:v.map((a,c)=>{var b,P,$;return e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.05},className:"bg-white rounded-3xl p-6 border border-gray-200 shadow-sm hover:shadow-lg transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${A(a.status)}`,children:[e.jsx("span",{className:"material-symbols-outlined text-xs align-middle mr-1",children:E(a.status)}),((b=a.status)==null?void 0:b.toUpperCase())||"UNKNOWN"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Booking #",String(a.id).slice(0,8).toUpperCase()]})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:fe},children:a.service_type?a.service_type.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()):"Security Service"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"business"}),e.jsx("span",{children:((P=a.host_profiles)==null?void 0:P.company_name)||(($=a.host_profiles)==null?void 0:$.full_name)||"Provider"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"calendar_today"}),e.jsx("span",{children:i(a.date||a.booking_date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"schedule"}),e.jsxs("span",{children:[S(a.start_time)," - ",S(a.end_time)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"location_on"}),e.jsx("span",{className:"truncate",children:a.location||"Location not specified"})]})]}),a.user_notes&&e.jsx("div",{className:"mt-3 p-3 rounded-xl bg-gray-50 border border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Notes: "}),a.user_notes]})})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold mb-1",style:{color:W},children:["â‚¹",a.price||0]}),e.jsx("div",{className:"text-xs text-gray-500",children:a.duration_hours?`${a.duration_hours} hours`:"Service"})]}),e.jsxs("div",{className:"flex gap-2",children:[a.status==="pending"&&e.jsx("button",{className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-600 bg-white border border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-xl text-sm font-semibold text-white transition-all",style:{backgroundColor:W},children:"View Details"})]})]})]})},a.id)})})]})})},M="#DAA520",Y="#F7F7F7",te="#1A1A1A",Re=()=>{const{user:x,profile:v,refreshProfile:f}=H(),[_,u]=g.useState({full_name:"",email:"",phone:"",address:""}),[o,L]=g.useState({current:"",new:"",confirm:""}),[C,A]=g.useState(!1),[E,i]=g.useState(!1),[S,N]=g.useState(""),[a,c]=g.useState("");g.useEffect(()=>{v?u({full_name:v.full_name||"",email:v.email||(x==null?void 0:x.email)||"",phone:v.phone||"",address:v.address||""}):x&&u({full_name:"",email:x.email||"",phone:"",address:""})},[v,x]);const b=r=>{const{name:k,value:Z}=r.target;u(K=>({...K,[k]:Z})),a&&c(""),S&&N("")},P=async()=>{if(x!=null&&x.id){A(!0),c(""),N("");try{const{error:r}=await R.from("profiles").upsert({id:x.id,email:_.email,full_name:_.full_name,phone:_.phone,address:_.address,updated_at:new Date().toISOString()},{onConflict:"id"});if(r)throw r;N("Profile updated successfully!"),await f(),setTimeout(()=>N(""),3e3)}catch(r){console.error("Error updating profile:",r),c(r.message||"Failed to update profile. Please try again.")}finally{A(!1)}}},$=async()=>{if(o.new!==o.confirm){c("New passwords do not match");return}if(o.new.length<6){c("Password must be at least 6 characters");return}i(!0),c(""),N("");try{const{error:r}=await R.auth.updateUser({password:o.new});if(r)throw r;N("Password changed successfully!"),L({current:"",new:"",confirm:""}),setTimeout(()=>N(""),3e3)}catch(r){console.error("Error changing password:",r),c(r.message||"Failed to change password. Please try again.")}finally{i(!1)}};return e.jsx(V,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:te},children:"Account Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your personal information and security settings"})]}),S&&e.jsx(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-2xl bg-green-50 border border-green-200 text-green-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),e.jsx("span",{children:S})]})}),a&&e.jsx(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-2xl bg-red-50 border border-red-200 text-red-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined",children:"error"}),e.jsx("span",{children:a})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-3xl p-8 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center",style:{backgroundColor:`${M}15`},children:e.jsx("span",{className:"material-symbols-outlined",style:{color:M},children:"person"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:te},children:"Profile Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update your personal details"})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",name:"full_name",value:_.full_name,onChange:b,placeholder:"Enter your full name",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all",style:{backgroundColor:Y}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:_.email,onChange:b,disabled:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:_.phone,onChange:b,placeholder:"+91 90000 12345",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all",style:{backgroundColor:Y}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{name:"address",value:_.address,onChange:b,placeholder:"Enter your address",rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all resize-none",style:{backgroundColor:Y}})]}),e.jsx(w.button,{onClick:P,disabled:C,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-3 rounded-xl text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:M},children:C?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Saving..."})]}):"Save Changes"})]})]}),e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-3xl p-8 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center",style:{backgroundColor:`${M}15`},children:e.jsx("span",{className:"material-symbols-outlined",style:{color:M},children:"lock"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:te},children:"Security Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Change your password"})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:o.new,onChange:r=>L(k=>({...k,new:r.target.value})),placeholder:"Enter new password",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all",style:{backgroundColor:Y}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:o.confirm,onChange:r=>L(k=>({...k,confirm:r.target.value})),placeholder:"Confirm new password",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all",style:{backgroundColor:Y}})]}),o.new&&o.confirm&&o.new!==o.confirm&&e.jsx("p",{className:"text-sm text-red-600",children:"Passwords do not match"}),e.jsx(w.button,{onClick:$,disabled:E||!o.new||o.new!==o.confirm,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-3 rounded-xl text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:M},children:E?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Changing..."})]}):"Change Password"})]}),e.jsxs("div",{className:"mt-8 p-4 rounded-2xl bg-gray-50 border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Security Tips"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Use a strong, unique password"}),e.jsx("li",{children:"â€¢ Don't share your password with anyone"}),e.jsx("li",{children:"â€¢ Enable two-factor authentication if available"}),e.jsx("li",{children:"â€¢ Log out from shared devices"})]})]})]})]})]})})},U="#DAA520",be="#F7F7F7",B="#1A1A1A",je=[{id:"night-guard",name:"Night Guard",icon:"ðŸŒ™"},{id:"day-guard",name:"Day Guard",icon:"ðŸŒ¤ï¸"},{id:"male-guard",name:"Male Guard",icon:"ðŸ‘¨â€ðŸ’¼"},{id:"female-guard",name:"Female Guard",icon:"ðŸ‘©â€ðŸ’¼"},{id:"bouncer",name:"Bouncer",icon:"ðŸ›¡ï¸"},{id:"event-security",name:"Event Security",icon:"ðŸŽª"},{id:"emergency-response",name:"Emergency Response",icon:"ðŸš¨"},{id:"corporate-security",name:"Corporate Security",icon:"ðŸ¢"},{id:"industrial-security",name:"Industrial Security",icon:"ðŸ­"},{id:"personal-bodyguard",name:"Personal Bodyguard",icon:"ðŸ¤µ"}],ae=()=>{H();const[x,v]=Ce(),[f,_]=g.useState(null),[u,o]=g.useState([]),[L,C]=g.useState([]),[A,E]=g.useState(!1),[i,S]=g.useState(!1),[N,a]=g.useState(""),[c,b]=g.useState({location:"",priceRange:[0,1e4],guardType:"",minRating:0,experience:[0,20]});g.useEffect(()=>{const s=x.get("search");s&&(a(s),r(s))},[x]),g.useEffect(()=>{!f&&!N&&($(),Z())},[]),g.useEffect(()=>{f&&!N&&P()},[f,c]);const P=async()=>{E(!0);try{let s=R.from("host_services").select("*").eq("is_active",!0);if(f){const l={"night-guard":"guards","day-guard":"guards","male-guard":"guards","female-guard":"guards",bouncer:"guards","event-security":"agencies","emergency-response":"agencies","corporate-security":"agencies","industrial-security":"agencies","personal-bodyguard":"agencies"}[f.id]||"guards";s=s.eq("service_type",l)}c.location&&(s=s.or(`city.ilike.%${c.location}%,state.ilike.%${c.location}%`));const{data:n,error:d}=await s;if(d){console.error("Error fetching providers:",d),o([]);return}if(!n||n.length===0){o([]);return}const y=[...new Set(n.map(m=>m.provider_id||m.host_id).filter(Boolean))];let j=[];if(y.length>0){const{data:m,error:l}=await R.from("host_profiles").select("id, company_name, full_name, rating, verified, phone, address, city, state, avatar_url, logo_path").in("id",y);!l&&m&&(j=m)}let h=n.map(m=>{const l=m.provider_id||m.host_id,t=j.find(p=>p.id===l)||null;return{...m,host_profiles:t}});c.priceRange[1]<1e4&&(h=h.filter(m=>(m.price_per_hour||0)>=c.priceRange[0]&&(m.price_per_hour||0)<=c.priceRange[1])),c.minRating>0&&(h=h.filter(m=>{var l;return(((l=m.host_profiles)==null?void 0:l.rating)||0)>=c.minRating})),o(h)}catch(s){console.error("Error fetching providers:",s)}finally{E(!1)}},$=async()=>{E(!0);try{const{data:s,error:n}=await R.from("host_services").select("*").eq("is_active",!0).order("created_at",{ascending:!1}).limit(50);if(n){console.error("Error fetching services:",n),o([]);return}if(!s||s.length===0){console.log("No active services found"),o([]);return}const d=[...new Set(s.map(h=>h.provider_id||h.host_id).filter(Boolean))];let y=[];if(d.length>0){const{data:h,error:m}=await R.from("host_profiles").select("id, company_name, full_name, rating, verified, phone, address, city, state, avatar_url, logo_path").in("id",d);!m&&h&&(y=h)}const j=s.map(h=>{const m=h.provider_id||h.host_id,l=y.find(t=>t.id===m)||null;return{...h,host_profiles:l}});console.log(`âœ… Fetched ${j.length} services with profiles`),o(j)}catch(s){console.error("Error fetching providers:",s),o([])}finally{E(!1)}},r=async s=>{E(!0);try{const{data:n,error:d}=await R.from("host_services").select("*").eq("is_active",!0);if(d){console.error("Error fetching providers for search:",d),o([]);return}if(!n||n.length===0){o([]);return}const y=[...new Set(n.map(t=>t.provider_id||t.host_id).filter(Boolean))];let j=[];if(y.length>0){const{data:t,error:p}=await R.from("host_profiles").select("id, company_name, full_name, rating, verified, phone, address, city, state, avatar_url, logo_path").in("id",y);!p&&t&&(j=t)}let m=n.map(t=>{const p=t.provider_id||t.host_id,T=j.find(F=>F.id===p)||null;return{...t,host_profiles:T}}).filter(t=>{var re,le,ne,ie,oe,ce,de,me,xe,he,ue,ge,pe,ye;const p=s.toLowerCase(),T=((le=(re=t.host_profiles)==null?void 0:re.company_name)==null?void 0:le.toLowerCase())||"",F=((ie=(ne=t.host_profiles)==null?void 0:ne.full_name)==null?void 0:ie.toLowerCase())||"",q=((oe=t.service_name)==null?void 0:oe.toLowerCase())||"",D=((ce=t.description)==null?void 0:ce.toLowerCase())||"",G=((de=t.city)==null?void 0:de.toLowerCase())||((xe=(me=t.host_profiles)==null?void 0:me.city)==null?void 0:xe.toLowerCase())||"",Q=((he=t.state)==null?void 0:he.toLowerCase())||((ge=(ue=t.host_profiles)==null?void 0:ue.state)==null?void 0:ge.toLowerCase())||"",ee=((pe=t.service_type)==null?void 0:pe.toLowerCase())||"",X=((ye=t.sub_category)==null?void 0:ye.toLowerCase())||"",Ne=(t.specializations||[]).join(" ").toLowerCase();return T.includes(p)||F.includes(p)||q.includes(p)||D.includes(p)||G.includes(p)||Q.includes(p)||ee.includes(p)||X.includes(p)||Ne.includes(p)});const l=je.find(t=>t.name.toLowerCase().includes(s.toLowerCase()));l&&_(l),o(m)}catch(n){console.error("Error fetching providers:",n)}finally{E(!1)}},k=()=>{_(null),o([]),a(""),v({})},Z=async()=>{S(!0);try{const{data:s,error:n}=await R.from("host_services").select("provider_id, host_id, rating, total_bookings").eq("is_active",!0);if(n){console.error("Error fetching services for companies:",n),C([]);return}if(!s||s.length===0){C([]);return}const d={};s.forEach(l=>{const t=l.provider_id||l.host_id;t&&(d[t]||(d[t]={id:t,totalServices:0,totalBookings:0,avgRating:0,ratings:[]}),d[t].totalServices++,d[t].totalBookings+=l.total_bookings||0,l.rating&&d[t].ratings.push(l.rating))}),Object.values(d).forEach(l=>{l.ratings.length>0&&(l.avgRating=l.ratings.reduce((t,p)=>t+p,0)/l.ratings.length)});const y=Object.values(d).sort((l,t)=>t.avgRating!==l.avgRating?t.avgRating-l.avgRating:t.totalBookings-l.totalBookings).slice(0,12).map(l=>l.id);if(y.length===0){C([]);return}const{data:j,error:h}=await R.from("host_profiles").select("id, company_name, full_name, rating, verified, phone, address, city, state, avatar_url, logo_path").in("id",y).order("rating",{ascending:!1});if(h){console.error("Error fetching company profiles:",h),C([]);return}const m=(j||[]).map(l=>{const t=d[l.id]||{};return{...l,totalServices:t.totalServices||0,totalBookings:t.totalBookings||0,avgRating:t.avgRating||l.rating||0}}).sort((l,t)=>t.avgRating!==l.avgRating?t.avgRating-l.avgRating:t.totalBookings-l.totalBookings);C(m)}catch(s){console.error("Error fetching top companies:",s),C([])}finally{S(!1)}},K=async s=>{const n=s.provider_id||s.host_id;if(!n){o([s]),_(null);return}E(!0);try{let d=null,y=null;const{data:j,error:h}=await R.from("host_services").select("*").eq("is_active",!0).eq("provider_id",n).order("created_at",{ascending:!1});if(!h&&j&&j.length>0)d=j;else{const{data:t,error:p}=await R.from("host_services").select("*").eq("is_active",!0).eq("host_id",n).order("created_at",{ascending:!1});d=t,y=p}if(y){console.error("Error fetching provider services:",y),o([s]);return}if(!d||d.length===0){o([s]);return}const{data:m}=await R.from("host_profiles").select("id, company_name, full_name, rating, verified, phone, address, city, state, avatar_url, logo_path").eq("id",n).single(),l=d.map(t=>({...t,host_profiles:m||s.host_profiles||null}));o(l),_(null),a(""),v({})}catch(d){console.error("Error in handleViewDetails:",d),o([s])}finally{E(!1)}};return f?e.jsx(V,{children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("button",{onClick:k,className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),e.jsx("span",{children:"Back to Categories"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2",style:{color:B},children:[f.name," Providers"]}),e.jsxs("p",{className:"text-gray-600",children:["Showing ",u.length," ",u.length===1?"service":"services"," available near you"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-[300px_1fr] gap-8",children:[e.jsxs("aside",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-200 h-fit sticky top-24",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",style:{color:B},children:"Filters"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",placeholder:"City or area",value:c.location,onChange:s=>b({...c,location:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all",style:{backgroundColor:be}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: â‚¹",c.priceRange[0]," - â‚¹",c.priceRange[1]]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{type:"range",min:"0",max:"10000",step:"500",value:c.priceRange[1],onChange:s=>b({...c,priceRange:[c.priceRange[0],parseInt(s.target.value)]}),className:"flex-1",style:{accentColor:U}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guard Type"}),e.jsx("div",{className:"space-y-2",children:["Male","Female","Armed","Unarmed"].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"guardType",value:s.toLowerCase(),checked:c.guardType===s.toLowerCase(),onChange:n=>b({...c,guardType:n.target.value}),className:"w-4 h-4",style:{accentColor:U}}),e.jsx("span",{className:"text-sm text-gray-700",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Rating"}),e.jsxs("select",{value:c.minRating,onChange:s=>b({...c,minRating:parseFloat(s.target.value)}),className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 focus:border-yellow-400 transition-all",style:{backgroundColor:be},children:[e.jsx("option",{value:0,children:"All Ratings"}),e.jsx("option",{value:4,children:"4â˜… and above"}),e.jsx("option",{value:4.5,children:"4.5â˜… and above"}),e.jsx("option",{value:4.8,children:"4.8â˜… and above"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Experience: ",c.experience[0]," - ",c.experience[1]," years"]}),e.jsx("input",{type:"range",min:"0",max:"20",step:"1",value:c.experience[1],onChange:s=>b({...c,experience:[c.experience[0],parseInt(s.target.value)]}),className:"w-full",style:{accentColor:U}})]}),e.jsx("button",{onClick:()=>b({location:"",priceRange:[0,1e4],guardType:"",minRating:0,experience:[0,20]}),className:"w-full py-2.5 rounded-xl text-sm font-medium border border-gray-300 hover:bg-gray-50 transition-colors",children:"Reset Filters"})]})]}),e.jsx("div",{className:"space-y-6",children:A?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin"})}):u.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No providers found matching your criteria."}),e.jsx("button",{onClick:()=>b({location:"",priceRange:[0,1e4],guardType:"",minRating:0,experience:[0,20]}),className:"mt-4 px-6 py-2 rounded-full text-sm font-medium border border-gray-300 hover:bg-gray-50 transition-colors",children:"Clear Filters"})]}):u.map(s=>{var n,d,y,j,h,m,l,t,p,T,F,q;return e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},className:"bg-white rounded-3xl p-6 shadow-sm hover:shadow-xl border border-gray-200 transition-all duration-300",children:e.jsxs("div",{className:"flex gap-6",children:[s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.service_name||"Service",className:"w-20 h-20 rounded-2xl object-cover flex-shrink-0",onError:D=>{D.target.style.display="none",D.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-2xl flex-shrink-0 ${s.images&&s.images.length>0?"hidden":""}`,children:((y=(d=(n=s.host_profiles)==null?void 0:n.company_name)==null?void 0:d[0])==null?void 0:y.toUpperCase())||((h=(j=s.service_name)==null?void 0:j[0])==null?void 0:h.toUpperCase())||"G"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",style:{color:B},children:s.service_name||((m=s.host_profiles)==null?void 0:m.company_name)||((l=s.host_profiles)==null?void 0:l.full_name)||"Security Provider"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"location_on"}),e.jsxs("span",{children:[s.city||((t=s.host_profiles)==null?void 0:t.city)||"City",", ",s.state||((p=s.host_profiles)==null?void 0:p.state)||"State"]})]}),((T=s.host_profiles)==null?void 0:T.company_name)&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["by ",s.host_profiles.company_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold mb-1",style:{color:U},children:["â‚¹",s.price_per_hour||s.price||0]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.price_per_hour||s.price?`per ${s.price_per_hour?"hour":"service"}`:"Contact for pricing"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-400",children:"star"}),e.jsx("span",{className:"font-semibold",children:(s.rating||((F=s.host_profiles)==null?void 0:F.rating)||0).toFixed(1)}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.total_bookings||0," bookings)"]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[((q=s.host_profiles)==null?void 0:q.verified)&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Verified"}),(()=>{try{if(s.sub_category){const D=typeof s.sub_category=="string"?JSON.parse(s.sub_category):s.sub_category;if(D&&typeof D=="object")return Object.keys(D).slice(0,2).map((Q,ee)=>{var X;return e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:((X=D[Q])==null?void 0:X.label)||Q},ee)})}}catch{}return null})(),s.specializations&&s.specializations.length>0&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:s.specializations[0]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:s.description||"Professional security services with verified guards and 24/7 support."}),s.specializations&&s.specializations.length>0||s.equipment_included&&s.equipment_included.length>0?e.jsxs("div",{className:"mb-4 space-y-2",children:[s.specializations&&s.specializations.length>0&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Specializations:"}),s.specializations.slice(0,3).map((D,G)=>e.jsx("span",{className:"px-2 py-1 rounded-lg text-xs bg-gray-100 text-gray-700",children:D},G))]}),s.equipment_included&&s.equipment_included.length>0&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Equipment:"}),s.equipment_included.slice(0,2).map((D,G)=>e.jsx("span",{className:"px-2 py-1 rounded-lg text-xs bg-gray-100 text-gray-700",children:D},G))]})]}):null,e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"schedule"}),e.jsxs("span",{children:["Available: ",s.availability_schedule?"Flexible":"24/7"]})]}),e.jsx("button",{className:"px-6 py-2.5 rounded-full text-white font-semibold hover:opacity-90 transition-opacity",style:{backgroundColor:U},children:"View Details"})]})]})},s.id)})})]})]})}):N?e.jsxs(V,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:B},children:"Search Results"}),e.jsx("p",{className:"text-gray-600",children:A?"Searching...":u.length>0?e.jsxs(e.Fragment,{children:["Found ",u.length," ",u.length===1?"service":"services",' for "',N,'"']}):e.jsxs(e.Fragment,{children:['No services found for "',N,'"']})})]}),A?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin"})}):u.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>{var n,d,y,j,h,m,l,t,p,T,F;return e.jsxs(w.div,{whileHover:{y:-4},className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-200 hover:shadow-xl transition-all",children:[s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.service_name||"Service",className:"w-full h-32 rounded-xl object-cover mb-4",onError:q=>{q.target.style.display="none"}}):e.jsx("div",{className:"w-full h-32 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-3xl mb-4",children:((y=(d=(n=s.host_profiles)==null?void 0:n.company_name)==null?void 0:d[0])==null?void 0:y.toUpperCase())||((h=(j=s.service_name)==null?void 0:j[0])==null?void 0:h.toUpperCase())||"G"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:B},children:s.service_name||((m=s.host_profiles)==null?void 0:m.company_name)||((l=s.host_profiles)==null?void 0:l.full_name)||"Security Service"}),((t=s.host_profiles)==null?void 0:t.company_name)&&s.service_name&&e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["by ",s.host_profiles.company_name]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"location_on"}),e.jsxs("span",{children:[s.city||((p=s.host_profiles)==null?void 0:p.city)||"City",", ",s.state||((T=s.host_profiles)==null?void 0:T.state)||"State"]})]}),e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-sm",children:"star"}),e.jsx("span",{className:"text-sm font-semibold",children:(s.rating||((F=s.host_profiles)==null?void 0:F.rating)||0).toFixed(1)}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.total_bookings||0,")"]})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-3",children:s.description})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-2xl font-bold mb-1",style:{color:U},children:["â‚¹",s.price_per_hour||s.price||0,e.jsx("span",{className:"text-sm font-normal text-gray-600",children:s.price_per_hour?"/hour":s.price?"/service":""})]})}),e.jsx("button",{onClick:()=>K(s),className:"w-full py-2.5 rounded-xl text-white font-semibold transition-all hover:shadow-lg",style:{backgroundColor:U},children:"View Details"})]},s.id)})}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:B},children:"No results found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try searching with different keywords or browse by category"}),e.jsx("button",{onClick:k,className:"px-6 py-3 rounded-xl text-white font-semibold transition-all hover:shadow-lg",style:{backgroundColor:U},children:"Browse Categories"})]})]}):e.jsxs(V,{children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",style:{color:B},children:"Book a Security Guard"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Choose from trusted professionals"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-16",children:je.map(s=>{const n=(f==null?void 0:f.id)===s.id;return e.jsxs(w.button,{onClick:()=>_(s),whileHover:{y:-8,scale:1.02},whileTap:{scale:.98},className:`group relative p-8 bg-white rounded-3xl border-2 transition-all duration-300 ${n?"border-yellow-400 shadow-xl":"border-transparent hover:border-yellow-400 shadow-sm hover:shadow-xl"}`,style:{boxShadow:n?"0 8px 24px rgba(218, 165, 32, 0.2)":"0 2px 8px rgba(0,0,0,0.06)"},children:[e.jsx("div",{className:"text-5xl mb-4",children:s.icon}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:B},children:s.name}),n&&e.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 rounded-full bg-yellow-400 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white text-sm",children:"check"})}),e.jsx("div",{className:"absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-5 transition-opacity",style:{backgroundColor:U}})]},s.id)})}),e.jsxs("div",{className:"mb-16",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",style:{color:B},children:"Top Companies"}),e.jsx("p",{className:"text-gray-600",children:i?"Loading...":`Showing ${L.length} ${L.length===1?"company":"companies"}`})]})}),i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin"})}):L.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:L.map(s=>e.jsxs(w.div,{whileHover:{y:-4,scale:1.02},onClick:()=>{const n=s.company_name||s.full_name;n&&(a(n),v({search:n}),r(n))},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200 hover:shadow-xl transition-all cursor-pointer group",children:[s.logo_path?e.jsx("img",{src:s.logo_path,alt:s.company_name||s.full_name,className:"w-16 h-16 rounded-xl object-cover mb-4 mx-auto",onError:n=>{n.target.style.display="none",n.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-2xl mb-4 mx-auto ${s.logo_path?"hidden":""}`,children:(s.company_name||s.full_name||"C")[0].toUpperCase()}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:B},children:s.company_name||s.full_name||"Company"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-sm",children:"star"}),e.jsx("span",{className:"text-sm font-semibold",children:s.avgRating.toFixed(1)})]}),s.verified&&e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 mb-2",children:"Verified"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1 mt-2",children:[s.totalServices>0&&e.jsxs("p",{children:[s.totalServices," ",s.totalServices===1?"service":"services"]}),s.totalBookings>0&&e.jsxs("p",{children:[s.totalBookings," bookings"]}),(s.city||s.state)&&e.jsxs("p",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"location_on"}),s.city||""," ",s.state?(s.city?", ":"")+s.state:""]})]})]})]},s.id))}):e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-3xl",children:e.jsx("p",{className:"text-gray-600",children:"No companies available at the moment"})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",style:{color:B},children:"All Available Services"}),e.jsx("p",{className:"text-gray-600",children:A?"Loading...":`Showing ${u.length} ${u.length===1?"service":"services"}`})]})}),A?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-8 h-8 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin"})}):u.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>{var n,d,y,j,h,m,l,t,p,T,F;return e.jsxs(w.div,{whileHover:{y:-4},className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-200 hover:shadow-xl transition-all",children:[s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.service_name||"Service",className:"w-full h-32 rounded-xl object-cover mb-4",onError:q=>{q.target.style.display="none"}}):e.jsx("div",{className:"w-full h-32 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-3xl mb-4",children:((y=(d=(n=s.host_profiles)==null?void 0:n.company_name)==null?void 0:d[0])==null?void 0:y.toUpperCase())||((h=(j=s.service_name)==null?void 0:j[0])==null?void 0:h.toUpperCase())||"G"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:B},children:s.service_name||((m=s.host_profiles)==null?void 0:m.company_name)||((l=s.host_profiles)==null?void 0:l.full_name)||"Security Service"}),((t=s.host_profiles)==null?void 0:t.company_name)&&s.service_name&&e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["by ",s.host_profiles.company_name]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"location_on"}),e.jsxs("span",{children:[s.city||((p=s.host_profiles)==null?void 0:p.city)||"City",", ",s.state||((T=s.host_profiles)==null?void 0:T.state)||"State"]})]}),e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-sm",children:"star"}),e.jsx("span",{className:"text-sm font-semibold",children:(s.rating||((F=s.host_profiles)==null?void 0:F.rating)||0).toFixed(1)}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.total_bookings||0,")"]})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-3",children:s.description})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-2xl font-bold mb-1",style:{color:U},children:["â‚¹",s.price_per_hour||s.price||0,e.jsx("span",{className:"text-sm font-normal text-gray-600",children:s.price_per_hour?"/hour":s.price?"/service":""})]})}),e.jsx("button",{onClick:()=>K(s),className:"w-full py-2.5 rounded-xl text-white font-semibold transition-all hover:shadow-lg",style:{backgroundColor:U},children:"View Details"})]},s.id)})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-3xl",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:B},children:"No services available"}),e.jsx("p",{className:"text-gray-600",children:"Check back later for new services"})]})]})]})},Fe=()=>e.jsxs(_e,{children:[e.jsx(z,{index:!0,element:e.jsx(ae,{})}),e.jsx(z,{path:"bookings",element:e.jsx(Ae,{})}),e.jsx(z,{path:"dashboard",element:e.jsx(Le,{})}),e.jsx(z,{path:"account",element:e.jsx(Re,{})}),e.jsx(z,{path:"services",element:e.jsx(ae,{})}),e.jsx(z,{path:"*",element:e.jsx(ae,{})})]});export{Fe as default};
