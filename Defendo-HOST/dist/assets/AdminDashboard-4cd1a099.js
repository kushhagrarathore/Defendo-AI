import{r as n,a as J,j as e,s as _}from"./index-221e5e32.js";import{h as d}from"./motion-cb67fe8f.js";import{A as M}from"./index-cfdf0eb9.js";function q(){const[k,g]=n.useState([]),[h,R]=n.useState({}),[x,f]=n.useState(null),[$,U]=n.useState(!0),[D,A]=n.useState(null),[j,B]=n.useState(""),[c,F]=n.useState("all"),[y,E]=n.useState("all"),[m,C]=n.useState(null),[I,v]=n.useState(!1),[P,N]=n.useState(""),[K,w]=n.useState(null),G=J(),Q=t=>{const s={};return t.forEach(l=>{var i,r,u,p,Y;const o=((i=l.host_profiles)==null?void 0:i.company_name)||((r=l.host_profiles)==null?void 0:r.full_name)||"Unknown Company",a=((u=l.host_profiles)==null?void 0:u.id)||l.host_id;s[a]||(s[a]={companyId:a,companyName:o,hostName:((p=l.host_profiles)==null?void 0:p.full_name)||"N/A",email:((Y=l.host_profiles)==null?void 0:Y.email)||"N/A",documents:[],totalDocuments:0,pendingDocuments:0,submittedDocuments:0,approvedDocuments:0,rejectedDocuments:0}),s[a].documents.push(l),s[a].totalDocuments++,l.status==="pending"?s[a].pendingDocuments++:l.status==="submitted"?s[a].submittedDocuments++:l.status==="approved"?s[a].approvedDocuments++:l.status==="rejected"&&s[a].rejectedDocuments++}),s},T=n.useMemo(()=>{let t=Object.values(h);if(j){const s=j.toLowerCase();t=t.filter(l=>l.companyName.toLowerCase().includes(s)||l.hostName.toLowerCase().includes(s)||l.email.toLowerCase().includes(s))}return c!=="all"&&(t=t.filter(s=>c==="pending"?s.pendingDocuments>0:c==="submitted"?s.submittedDocuments>0:c==="approved"?s.approvedDocuments>0:c==="rejected"?s.rejectedDocuments>0:!0)),t},[h,j,c]),L=n.useMemo(()=>{if(!x)return[];let t=x.documents;return y!=="all"&&(t=t.filter(s=>s.document_type===y)),c!=="all"&&(t=t.filter(s=>s.status===c)),t},[x,y,c]),O=async t=>{if(!t)return null;try{const{data:s,error:l}=await _.storage.from("host-kyc-documents").createSignedUrl(t,3600);return l?(console.error("Error creating signed URL:",l),null):s.signedUrl}catch(s){return console.error("Error in getSignedUrl:",s),null}},S=async()=>{try{U(!0);const{data:t,error:s}=await _.from("host_kyc").select(`
          *,
          host_profiles(
            id,
            full_name,
            email,
            company_name
          )
        `).in("status",["pending","submitted","approved","rejected"]).order("submitted_at",{ascending:!1});if(s){console.error("Error fetching host KYC requests:",s);return}if(!t||t.length===0){g([]);return}const l=await Promise.all(t.map(async a=>{const i=await O(a.document_url);return{...a,documentUrl:i}}));g(l);const o=Q(l);R(o)}catch(t){console.error("Error processing KYC requests:",t)}finally{U(!1)}},z=async(t,s,l=null)=>{var o;try{A(t);const{error:a}=await _.from("host_kyc").update({status:s,reviewed_by:(o=(await _.auth.getUser()).data.user)==null?void 0:o.id,reviewed_at:new Date().toISOString(),rejection_reason:l||null}).eq("id",t);if(a){console.error(`Error ${s} KYC request:`,a),alert(`Failed to ${s} request: ${a.message}`);return}g(i=>i.map(r=>r.id===t?{...r,status:s,reviewed_at:new Date().toISOString(),rejection_reason:s==="rejected"&&l||null}:r)),R(i=>{const r={...i};return Object.keys(r).forEach(u=>{r[u]={...r[u],documents:r[u].documents.map(p=>p.id===t?{...p,status:s,reviewed_at:new Date().toISOString(),rejection_reason:s==="rejected"&&l||null}:p)}}),r}),f(i=>i&&{...i,documents:i.documents.map(r=>r.id===t?{...r,status:s,reviewed_at:new Date().toISOString(),rejection_reason:s==="rejected"&&l||null}:r)}),S()}catch(a){console.error("Error in handleDecision:",a),alert(`Error processing request: ${a.message}`)}finally{A(null),v(!1),N(""),w(null)}},V=t=>{w(t),v(!0)},H=()=>{K&&z(K.id,"rejected",P)},b=n.useMemo(()=>{const t=Object.values(h);return{totalCompanies:t.length,pendingDocuments:t.reduce((s,l)=>s+l.pendingDocuments,0),submittedDocuments:t.reduce((s,l)=>s+l.submittedDocuments,0),approvedDocuments:t.reduce((s,l)=>s+l.approvedDocuments,0),rejectedDocuments:t.reduce((s,l)=>s+l.rejectedDocuments,0),totalDocuments:k.length}},[h,k.length]);return n.useEffect(()=>{S()},[]),$?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#f8fbff] via-white to-[#fdfdff] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[var(--primary-color)]/30 border-t-[var(--primary-color)] rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 text-lg",children:"Loading KYC requests..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#f8fbff] via-white to-[#fdfdff]",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-slate-900 via-slate-800 to-[var(--primary-color)] bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"KYC Document Verification & Management"})]}),e.jsxs("button",{onClick:()=>G("/dashboard"),className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 hover:border-slate-300 transition-all duration-300 shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_back"}),e.jsx("span",{children:"Back to Dashboard"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600 text-sm font-medium mb-1",children:"Total Companies"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:b.totalCompanies})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-2xl",children:"business"})})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600 text-sm font-medium mb-1",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:b.pendingDocuments})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-yellow-600 text-2xl",children:"pending"})})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600 text-sm font-medium mb-1",children:"Submitted"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:b.submittedDocuments})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-2xl",children:"upload_file"})})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600 text-sm font-medium mb-1",children:"Approved"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:b.approvedDocuments})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 text-2xl",children:"check_circle"})})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600 text-sm font-medium mb-1",children:"Total Documents"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:b.totalDocuments})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600 text-2xl",children:"description"})})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Search companies, names, or emails...",value:j,onChange:t=>B(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 focus:border-[var(--primary-color)] transition-all"})]})}),e.jsxs("select",{value:c,onChange:t=>F(t.target.value),className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 focus:border-[var(--primary-color)] transition-all",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),x&&e.jsxs("select",{value:y,onChange:t=>E(t.target.value),className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 focus:border-[var(--primary-color)] transition-all",children:[e.jsx("option",{value:"all",children:"All Document Types"}),e.jsx("option",{value:"company_registration",children:"Company Registration"}),e.jsx("option",{value:"pan_card",children:"PAN Card"}),e.jsx("option",{value:"gst_registration",children:"GST Registration"}),e.jsx("option",{value:"trade_license",children:"Trade License"}),e.jsx("option",{value:"office_address_proof",children:"Office Address Proof"})]}),e.jsxs("button",{onClick:S,className:"px-6 py-3 bg-gradient-to-r from-[var(--primary-color)] to-emerald-500 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-emerald-300/40 transition-all duration-300 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined",children:"refresh"}),e.jsx("span",{children:"Refresh"})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:x?`${x.companyName} - Documents`:"Companies with KYC Requests"}),x&&e.jsxs("button",{onClick:()=>{f(null),E("all")},className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),e.jsx("span",{children:"Back to Companies"})]})]}),Object.keys(h).length===0?e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 bg-white rounded-2xl border border-slate-200",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 text-4xl",children:"check_circle"})}),e.jsx("p",{className:"text-slate-600 text-lg font-semibold mb-2",children:"No pending KYC requests"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"All requests have been processed"})]}):x?e.jsx("div",{className:"space-y-4",children:L.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-2xl border border-slate-200",children:e.jsx("p",{className:"text-slate-600",children:"No documents match the current filters"})}):L.map((t,s)=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg hover:shadow-xl transition-all",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[var(--primary-color)] to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:"description"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 capitalize",children:t.document_type.replace(/_/g," ")}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Document Type"}),e.jsxs("p",{className:"text-slate-400 text-xs mt-1",children:["Submitted: ",new Date(t.submitted_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t.status==="pending"?"bg-yellow-100 text-yellow-700":t.status==="submitted"?"bg-blue-100 text-blue-700":t.status==="approved"?"bg-green-100 text-green-700":t.status==="rejected"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:t.status==="pending"?"Pending Review":t.status==="submitted"?"Submitted":t.status==="approved"?"Approved":t.status==="rejected"?"Rejected":t.status}),t.reviewed_at&&e.jsxs("span",{className:"text-xs text-slate-400",children:["Reviewed: ",new Date(t.reviewed_at).toLocaleDateString()]})]}),t.rejection_reason&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-red-700 mb-1",children:"Rejection Reason:"}),e.jsx("p",{className:"text-sm text-red-600",children:t.rejection_reason})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-slate-900 font-semibold",children:"Document Preview"}),e.jsxs("button",{onClick:async()=>{const l=await O(t.document_url);l&&(g(o=>o.map(a=>a.id===t.id?{...a,documentUrl:l}:a)),f(o=>o&&{...o,documents:o.documents.map(a=>a.id===t.id?{...a,documentUrl:l}:a)}))},className:"flex items-center gap-1 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-all text-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),e.jsx("span",{children:"Refresh"})]})]}),e.jsx("div",{className:"space-y-3",children:t.documentUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative border-2 border-slate-200 rounded-xl overflow-hidden cursor-pointer hover:border-[var(--primary-color)] transition-all group",onClick:()=>C(t),children:[e.jsx("div",{className:`absolute top-3 left-3 z-10 px-2.5 py-1 rounded-lg text-xs font-semibold ${t.status==="approved"?"bg-green-500 text-white":t.status==="rejected"?"bg-red-500 text-white":t.status==="pending"?"bg-yellow-500 text-white":"bg-blue-500 text-white"}`,children:t.status}),t.document_type==="company_registration"||t.document_type==="pan_card"||t.document_type==="gst_registration"||t.document_type==="trade_license"||t.document_type==="office_address_proof"?e.jsx("iframe",{src:t.documentUrl,title:"Document",className:"w-full h-64",onError:l=>{l.target.style.display="none",l.target.nextSibling.style.display="block"}}):e.jsx("img",{src:t.documentUrl,alt:"Document",className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300",onError:l=>{l.target.style.display="none",l.target.nextSibling.style.display="block"}}),e.jsx("div",{className:"hidden w-full h-64 bg-slate-100 flex items-center justify-center",children:e.jsx("span",{className:"text-slate-400 text-sm",children:"Document preview unavailable"})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white/0 group-hover:text-white/80 transition-colors text-3xl",children:"zoom_in"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("a",{href:t.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-[var(--primary-color)] to-emerald-500 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-emerald-300/40 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),e.jsx("span",{children:"Download"})]}),e.jsxs("a",{href:t.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-slate-200 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"open_in_new"}),e.jsx("span",{children:"Open"})]})]})]}):e.jsx("div",{className:"h-64 bg-slate-100 border-2 border-dashed border-slate-300 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-slate-400 text-sm",children:"No document available"})})})]})]}),t.status!=="approved"&&t.status!=="rejected"&&e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsxs("button",{onClick:()=>z(t.id,"approved"),disabled:D===t.id,className:"flex items-center gap-2 px-6 py-2.5 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[D===t.id?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx("span",{className:"material-symbols-outlined",children:"check"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:()=>V(t),disabled:D===t.id,className:"flex items-center gap-2 px-6 py-2.5 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"material-symbols-outlined",children:"close"}),e.jsx("span",{children:"Reject"})]})]})})]},t.id))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.length===0?e.jsx("div",{className:"col-span-full text-center py-12 bg-white rounded-2xl border border-slate-200",children:e.jsx("p",{className:"text-slate-600",children:"No companies match your search criteria"})}):T.map((t,s)=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},onClick:()=>f(t),className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-lg hover:shadow-xl cursor-pointer hover:border-[var(--primary-color)] transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[var(--primary-color)] to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:"business"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 group-hover:text-[var(--primary-color)] transition-colors truncate",children:t.companyName}),e.jsx("p",{className:"text-slate-600 text-sm truncate",children:t.hostName}),e.jsx("p",{className:"text-slate-400 text-xs truncate",children:t.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("p",{className:"text-slate-600 text-xs mb-1",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-slate-900",children:t.totalDocuments})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-yellow-700 text-xs mb-1",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:t.pendingDocuments})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-blue-700 text-xs mb-1",children:"Submitted"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:t.submittedDocuments})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-green-700 text-xs mb-1",children:"Approved"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:t.approvedDocuments})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600 text-sm",children:"Click to view documents"}),e.jsx("span",{className:"material-symbols-outlined text-slate-400 group-hover:text-[var(--primary-color)] transition-colors",children:"arrow_forward"})]})]},t.companyId))})]})]}),e.jsx(M,{children:m&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:()=>C(null),children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 capitalize",children:m.document_type.replace(/_/g," ")}),e.jsx("button",{onClick:()=>C(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600",children:"close"})})]}),e.jsx("div",{className:"p-4 overflow-auto max-h-[calc(90vh-80px)]",children:m.documentUrl?m.document_type==="company_registration"||m.document_type==="pan_card"||m.document_type==="gst_registration"||m.document_type==="trade_license"||m.document_type==="office_address_proof"?e.jsx("iframe",{src:m.documentUrl,title:"Document",className:"w-full h-[70vh] border border-slate-200 rounded-lg"}):e.jsx("img",{src:m.documentUrl,alt:"Document",className:"w-full h-auto rounded-lg"}):e.jsx("div",{className:"h-64 bg-slate-100 flex items-center justify-center rounded-lg",children:e.jsx("span",{className:"text-slate-400",children:"Document not available"})})})]})})}),e.jsx(M,{children:I&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>{v(!1),N(""),w(null)},children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Reject Document"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Are you sure you want to reject this document? You can provide an optional reason below."}),e.jsx("textarea",{value:P,onChange:t=>N(t.target.value),placeholder:"Rejection reason (optional)...",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all mb-4 resize-none",rows:4}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:H,className:"flex-1 px-6 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 hover:shadow-lg transition-all",children:"Confirm Rejection"}),e.jsx("button",{onClick:()=>{v(!1),N(""),w(null)},className:"flex-1 px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-all",children:"Cancel"})]})]})})})]})}export{q as default};
