import{R as O,j as e,a as Q,N as J,r as f,u as V}from"./react-vendor-2b1ec00c.js";import{u as U,s as S,d as K}from"./auth-3baf3f66.js";import{A as $,m as h,u as X,R as G,B as q,C as T,X as R,Y as L,T as B,a as ee,b as te,c as se}from"./ui-vendor-ac3c59fb.js";const ae="modulepreload",re=function(t){return"/"+t},H={},he=function(i,l,o){if(!l||l.length===0)return i();const r=document.getElementsByTagName("link");return Promise.all(l.map(a=>{if(a=re(a),a in H)return;H[a]=!0;const s=a.endsWith(".css"),x=s?'[rel="stylesheet"]':"";if(!!o)for(let g=r.length-1;g>=0;g--){const u=r[g];if(u.href===a&&(!s||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${x}`))return;const n=document.createElement("link");if(n.rel=s?"stylesheet":ae,s||(n.as="script",n.crossOrigin=""),n.href=a,document.head.appendChild(n),s)return new Promise((g,u)=>{n.addEventListener("load",g),n.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>i()).catch(a=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a})};class xe extends O.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,l){}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-[#111714] text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-white/70 mb-4",children:"Please refresh the page and try again"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-[var(--primary-color)] text-[#111714] px-6 py-2 rounded-lg font-medium hover:bg-opacity-90 transition-colors",children:"Refresh Page"}),e.jsxs("details",{className:"mt-4 text-left",children:[e.jsx("summary",{className:"cursor-pointer text-sm text-white/50",children:"Error Details"}),e.jsx("pre",{className:"mt-2 text-xs text-red-400 bg-black/50 p-2 rounded overflow-auto",children:this.state.error?.toString()})]})]})}):this.props.children}}const ue=({children:t})=>{const{user:i,loading:l}=U(),o=Q();return l?e.jsx("div",{className:"min-h-screen bg-[#111714] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[var(--primary-color)] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"Loading..."})]})}):i?t:e.jsx(J,{to:"/login",state:{from:o},replace:!0})},ge=({size:t="md",color:i="primary",className:l=""})=>{const o={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},r={primary:"border-[var(--primary-color)]",white:"border-white",gray:"border-gray-400"};return e.jsx("div",{className:`${o[t]} ${l}`,children:e.jsx("div",{className:`w-full h-full border-4 border-transparent border-t-current rounded-full animate-spin ${r[i]}`})})};function ie(){const[t,i]=f.useState([]),[l,o]=f.useState(!1);f.useEffect(()=>{let s,x;return(async()=>{const{data:d}=await S.auth.getUser(),n=d?.user?.id;n&&(s=S.channel("kyc_status_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"host_kyc",filter:`host_id=eq.${n}`},async g=>{if(g.new.status==="approved"){r({type:"success",title:"KYC Approved! 🎉",message:"Your KYC documents have been approved by our admin team.",timestamp:new Date().toISOString()});const{data:u}=await S.from("host_kyc").select("status").eq("host_id",n);if(u&&u.length>0){const y=u.map(N=>N.status),w=y.includes("rejected"),k=y.some(N=>N==="pending"||N==="submitted"),C=y.includes("approved");!w&&!k&&C&&r({type:"success",title:"All Documents Approved ✅",message:"Great news! All your KYC documents are approved. Your account is fully verified.",timestamp:new Date().toISOString()})}}else g.new.status==="rejected"&&r({type:"error",title:"KYC Rejected",message:g.new.rejection_reason||"Your KYC documents have been rejected. Please review and resubmit.",timestamp:new Date().toISOString()})}).subscribe(),x=S.channel("host_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${n}`},g=>{const u=g.new||{},y=(u.type||"").includes("verification")&&(u.title||"").toLowerCase().includes("verified");r({type:y?"success":"info",title:u.title||"Notification",message:u.message||"",timestamp:u.created_at||new Date().toISOString()})}).subscribe())})(),()=>{s&&S.removeChannel(s),x&&S.removeChannel(x)}},[]);const r=s=>{const x=Date.now();i(n=>[...n,{...s,id:x}]),o(!0);const d=setTimeout(()=>{a(x)},5e3);return()=>clearTimeout(d)},a=s=>{i(x=>x.filter(d=>d.id!==s)),t.length===1&&o(!1)};return!l||t.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.jsx($,{children:t.map(s=>e.jsx(h.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,ease:"easeOut"},className:`max-w-sm bg-white rounded-lg shadow-lg border-l-4 p-4 ${s.type==="success"?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:s.type==="success"?e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"✓"})}):e.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"✕"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h4",{className:`text-sm font-medium ${s.type==="success"?"text-green-800":"text-red-800"}`,children:s.title}),e.jsx("p",{className:`text-sm mt-1 ${s.type==="success"?"text-green-700":"text-red-700"}`,children:s.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(s.timestamp).toLocaleTimeString()})]}),e.jsxs("button",{onClick:()=>a(s.id),className:"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})},s.id))})})}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),le=({end:t,duration:i=2,suffix:l="",prefix:o="",className:r="",delay:a=0})=>{const[s,x]=f.useState(0),d=f.useRef(null),n=X(d,{once:!0,threshold:.5});return f.useEffect(()=>{if(n){const g=setTimeout(()=>{let u=null;const y=w=>{u===null&&(u=w);const k=Math.min((w-u)/(i*1e3),1);x(Math.floor(k*t)),k<1&&requestAnimationFrame(y)};requestAnimationFrame(y)},a*1e3);return()=>clearTimeout(g)}},[n,t,i,a]),e.jsxs(h.span,{ref:d,className:r,initial:{opacity:0,scale:.5},animate:n?{opacity:1,scale:1}:{opacity:0,scale:.5},transition:{duration:.6,ease:"easeOut"},children:[o,s,l]})},be=({label:t,value:i,icon:l,growth:o,growthType:r="increase",index:a=0,isCurrency:s=!1})=>e.jsxs(h.div,{className:"rounded-2xl p-6 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)] group hover:border-[var(--primary-color)]/30 transition-all duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:220,damping:24,delay:a*.1},whileHover:{scale:1.02,y:-4,boxShadow:"0 10px 30px rgba(74,222,128,0.08)",transition:{duration:.2}},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h.div,{className:"w-12 h-12 rounded-full bg-[var(--primary-color)]/15 flex items-center justify-center",whileHover:{scale:1.1,rotate:360,transition:{duration:.6}},animate:{scale:[1,1.05,1],transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:a*.2}},children:e.jsx("span",{className:"material-symbols-outlined text-[var(--primary-color)] text-xl",children:l})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm font-medium",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{end:i,suffix:"",className:"text-2xl font-bold text-white",delay:a*.1}),s&&e.jsx("span",{className:"text-2xl font-bold text-white",children:"₹"})]})]})]}),o!==void 0&&e.jsxs(h.div,{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${r==="increase"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5+a*.1},children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:r==="increase"?"trending_up":"trending_down"}),e.jsxs("span",{children:[o,"%"]})]})]}),e.jsx(h.div,{className:"w-full h-1 bg-white/10 rounded-full overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3+a*.1},children:e.jsx(h.div,{className:"h-full bg-gradient-to-r from-[var(--primary-color)] to-blue-500 rounded-full",initial:{width:0},animate:{width:`${Math.min(i/100*100,100)}%`},transition:{duration:1.5,delay:.5+a*.1,ease:"easeOut"}})})]}),fe=({data:t=[]})=>{const i=t.length>0?t:[{name:"Jan",bookings:12,revenue:24e3},{name:"Feb",bookings:19,revenue:38e3},{name:"Mar",bookings:15,revenue:3e4},{name:"Apr",bookings:22,revenue:44e3},{name:"May",bookings:18,revenue:36e3},{name:"Jun",bookings:25,revenue:5e4}],l=({active:o,payload:r,label:a})=>o&&r&&r.length?e.jsxs(h.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"bg-[#1a241e] border border-white/20 rounded-lg p-3 shadow-xl",children:[e.jsx("p",{className:"text-white font-medium",children:`${a}`}),r.map((s,x)=>e.jsx("p",{className:"text-sm",style:{color:s.color},children:`${s.dataKey}: ${s.value}`},x))]}):null;return e.jsxs(h.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs(h.div,{className:"rounded-2xl p-6 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)]",whileHover:{scale:1.01},transition:{duration:.2},children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Monthly Bookings"}),e.jsx("div",{className:"h-64",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(q,{data:i,barSize:12,children:[e.jsx(T,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(R,{dataKey:"name",stroke:"rgba(255,255,255,0.6)",fontSize:12}),e.jsx(L,{stroke:"rgba(255,255,255,0.6)",fontSize:12}),e.jsx(B,{content:e.jsx(l,{})}),e.jsx(ee,{dataKey:"bookings",fill:"url(#bookingsGradient)",radius:[6,6,0,0]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"bookingsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--primary-color)"}),e.jsx("stop",{offset:"100%",stopColor:"var(--primary-color)",stopOpacity:.6})]})})]})})})]}),e.jsxs(h.div,{className:"rounded-2xl p-6 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)]",whileHover:{scale:1.01},transition:{duration:.2},children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Revenue Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(te,{data:i,children:[e.jsx(T,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(R,{dataKey:"name",stroke:"rgba(255,255,255,0.6)",fontSize:12}),e.jsx(L,{stroke:"rgba(255,255,255,0.6)",fontSize:12}),e.jsx(B,{content:e.jsx(l,{})}),e.jsx(se,{type:"monotone",dataKey:"revenue",stroke:"var(--primary-color)",fill:"url(#revenueGradient)",strokeWidth:2}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--primary-color)",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"var(--primary-color)",stopOpacity:.1})]})})]})})})]})]})},je=({isOpen:t,onClose:i})=>{const[l,o]=f.useState([]);f.useEffect(()=>{const d=n=>{const g=n.detail;o(u=>[{id:g.id||Date.now(),...g},...u])};return window.addEventListener("dashboard:new-notification",d),()=>window.removeEventListener("dashboard:new-notification",d)},[]);const r=d=>{switch(d){case"booking":return"event_available";case"cancellation":return"event_busy";case"payment":return"payments";case"alert":return"warning";default:return"notifications"}},a=d=>{switch(d){case"booking":return"text-green-400 bg-green-500/20";case"cancellation":return"text-red-400 bg-red-500/20";case"payment":return"text-blue-400 bg-blue-500/20";case"alert":return"text-yellow-400 bg-yellow-500/20";default:return"text-gray-400 bg-gray-500/20"}},s=d=>{o(n=>n.map(g=>g.id===d?{...g,unread:!1}:g))},x=d=>{o(n=>n.filter(g=>g.id!==d))};return e.jsx($,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(h.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i}),e.jsxs(h.div,{className:"fixed right-0 top-0 h-full w-96 bg-[#111714] border-l border-white/10 shadow-2xl z-50",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Notifications"}),e.jsx(h.button,{onClick:i,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx("span",{className:"material-symbols-outlined text-white/70",children:"close"})})]})}),e.jsxs("div",{className:"p-4 space-y-3 overflow-y-auto h-full",children:[e.jsx($,{children:l.map((d,n)=>e.jsx(h.div,{initial:{opacity:0,x:50,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-50,scale:.9},transition:{duration:.3,delay:n*.1,type:"spring",stiffness:200},className:`p-4 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 transition-all duration-200 ${d.unread?"ring-2 ring-[var(--primary-color)]/30":""}`,onClick:()=>s(d.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(h.div,{className:`w-10 h-10 rounded-full flex items-center justify-center ${a(d.type)}`,whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:r(d.type)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-white font-medium text-sm truncate",children:d.title}),d.unread&&e.jsx(h.div,{className:"w-2 h-2 bg-[var(--primary-color)] rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0}})]}),e.jsx("p",{className:"text-white/70 text-xs mb-2 line-clamp-2",children:d.message}),e.jsx("p",{className:"text-white/50 text-xs",children:d.time})]}),e.jsx(h.button,{onClick:g=>{g.stopPropagation(),x(d.id)},className:"p-1 rounded hover:bg-white/10 transition-colors opacity-0 group-hover:opacity-100",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx("span",{className:"material-symbols-outlined text-white/50 text-sm",children:"close"})})]})},d.id))}),l.length===0&&e.jsxs(h.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(h.span,{className:"material-symbols-outlined text-white/30 text-4xl mb-3 block",animate:{y:[0,-4,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"notifications_none"}),e.jsx("p",{className:"text-white/60",children:"No notifications"}),e.jsx("p",{className:"text-white/40 text-sm",children:"You're all caught up!"})]})]})]})]})})},ye=({bookings:t=[]})=>{const i=a=>{switch(a){case"completed":return"text-green-400 bg-green-500/20";case"confirmed":return"text-blue-400 bg-blue-500/20";case"pending":return"text-yellow-400 bg-yellow-500/20";case"cancelled":return"text-red-400 bg-red-500/20";default:return"text-gray-400 bg-gray-500/20"}},l=a=>{switch(a){case"completed":return"check_circle";case"confirmed":return"event_available";case"pending":return"pending";case"cancelled":return"cancel";default:return"help"}},o=a=>{const s=new Date(a),d=Math.abs(new Date-s),n=Math.ceil(d/(1e3*60*60*24));return n===0?"Today":n===1?"Tomorrow":n<=7?`${n} days from now`:s.toLocaleDateString()},r=Array.isArray(t)?t:[];return e.jsxs(h.div,{className:"rounded-2xl p-6 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Booking Timeline"}),e.jsx(h.button,{className:"text-[var(--primary-color)] text-sm font-medium hover:text-white transition-colors",whileHover:{scale:1.05},children:"View All"})]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsx($,{children:r.map((a,s)=>e.jsxs(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.4,delay:s*.1,type:"spring",stiffness:200},className:"relative",children:[s<r.length-1&&e.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-16 bg-white/10"}),e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg hover:bg-white/5 transition-colors group",children:[e.jsx(h.div,{className:`w-12 h-12 rounded-full flex items-center justify-center ${i(a.status)} relative z-10`,whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:l(a.status)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"text-white font-medium capitalize",children:[a.service_type," Service"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(a.status)}`,children:a.status})]}),e.jsxs("div",{className:"space-y-1 text-sm text-white/70",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"schedule"}),e.jsxs("span",{children:[o(a.date)," at ",a.time]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"location_on"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"attach_money"}),e.jsxs("span",{children:["₹",a.price.toLocaleString()]})]})]})]}),e.jsx(h.button,{className:"opacity-0 group-hover:opacity-100 p-2 rounded-lg hover:bg-white/10 transition-all",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx("span",{className:"material-symbols-outlined text-white/50 text-sm",children:"more_vert"})})]})]},a.id))}),r.length===0&&e.jsxs(h.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(h.span,{className:"material-symbols-outlined text-white/30 text-4xl mb-3 block",animate:{y:[0,-4,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"timeline"}),e.jsx("p",{className:"text-white/60",children:"No bookings scheduled"}),e.jsx("p",{className:"text-white/40 text-sm",children:"Your upcoming bookings will appear here"})]})]})]})},we=()=>{const[t,i]=f.useState([{id:1,name:"Akhil Kumar",status:"online",location:"Indore Central",lastSeen:"2 min ago"},{id:2,name:"Priya Singh",status:"offline",location:"Bhopal Mall",lastSeen:"1 hour ago"},{id:3,name:"Ravi Patel",status:"online",location:"Gwalior Station",lastSeen:"5 min ago"},{id:4,name:"Sneha Sharma",status:"busy",location:"Ujjain Temple",lastSeen:"10 min ago"}]),l=s=>{switch(s){case"online":return"text-green-400 bg-green-500/20";case"offline":return"text-red-400 bg-red-500/20";case"busy":return"text-yellow-400 bg-yellow-500/20";default:return"text-gray-400 bg-gray-500/20"}},o=s=>{switch(s){case"online":return"circle";case"offline":return"radio_button_unchecked";case"busy":return"schedule";default:return"help"}},r=t.filter(s=>s.status==="online").length,a=t.length;return e.jsxs(h.div,{className:"rounded-2xl p-6 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Guard Status"}),e.jsxs(h.div,{className:"flex items-center gap-2",whileHover:{scale:1.05},children:[e.jsx(h.div,{className:"w-3 h-3 bg-green-400 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}}),e.jsxs("span",{className:"text-green-400 text-sm font-medium",children:[r,"/",a," Online"]})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsx($,{children:t.map((s,x)=>e.jsxs(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.4,delay:x*.1,type:"spring",stiffness:200},className:"flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors group",children:[e.jsx(h.div,{className:`w-10 h-10 rounded-full flex items-center justify-center ${l(s.status)}`,whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:o(s.status)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-white font-medium text-sm truncate",children:s.name}),e.jsx(h.div,{className:`w-2 h-2 rounded-full ${s.status==="online"?"bg-green-400":s.status==="offline"?"bg-red-400":"bg-yellow-400"}`,animate:s.status==="online"?{scale:[1,1.2,1],opacity:[1,.5,1]}:{},transition:{duration:2,repeat:s.status==="online"?1/0:0,ease:"easeInOut"}})]}),e.jsx("p",{className:"text-white/70 text-xs truncate",children:s.location}),e.jsxs("p",{className:"text-white/50 text-xs",children:["Last seen: ",s.lastSeen]})]}),e.jsx(h.button,{className:"opacity-0 group-hover:opacity-100 p-2 rounded-lg hover:bg-white/10 transition-all",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx("span",{className:"material-symbols-outlined text-white/50 text-sm",children:"more_vert"})})]},s.id))})}),e.jsxs(h.div,{className:"mt-6 p-4 rounded-lg border border-white/10 bg-white/5 text-center",whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx(h.span,{className:"material-symbols-outlined text-white/30 text-3xl mb-2 block",animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"map"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Live Map View"}),e.jsx("p",{className:"text-white/40 text-xs",children:"Coming Soon"})]})]})};function ve(){const{hostProfile:t}=U(),i=!!t?.verified;return e.jsx(h.div,{className:`rounded-xl border p-5 mb-8 ${i?"bg-green-500/10 border-green-500/20":"bg-yellow-500/10 border-yellow-500/20"}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.35},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-green-500/20":"bg-yellow-500/20"}`,children:e.jsx("span",{className:`material-symbols-outlined ${i?"text-green-400":"text-yellow-300"}`,children:i?"verified":"hourglass_top"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${i?"text-green-400":"text-yellow-300"}`,children:i?"Your account is verified":"Your documents are under verification"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:i?"You can now add services to start getting bookings.":"Our team is reviewing your documents. We will notify you once verified."})]})]})})}const v=({className:t=""})=>e.jsx(h.div,{className:`bg-white/5 rounded-lg animate-pulse ${t}`,initial:{opacity:.5},animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}),Ne=()=>e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"h-8 w-64"}),e.jsx(v,{className:"h-4 w-48"})]}),e.jsx(v,{className:"h-10 w-32"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(v,{className:"h-4 w-24"}),e.jsx(v,{className:"h-8 w-8 rounded-full"})]}),e.jsx(v,{className:"h-8 w-16 mb-2"}),e.jsx(v,{className:"h-3 w-20"})]},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[e.jsx(v,{className:"h-6 w-32 mb-4"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(v,{className:"h-4 w-3/4"}),e.jsx(v,{className:"h-3 w-1/2"})]}),e.jsx(v,{className:"h-8 w-20"})]},t))})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[e.jsx(v,{className:"h-6 w-24 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx(v,{className:"h-4 w-20"}),e.jsx(v,{className:"h-4 w-16"})]},t))})]})})]})]}),ne=({images:t,className:i=""})=>{const[l,o]=f.useState(0),[r,a]=f.useState(!1),[s,x]=f.useState("next");if(!t||t.length===0)return e.jsx("div",{className:`w-full h-48 bg-gradient-to-br from-[#29382f] to-[#1a241e] rounded-xl flex items-center justify-center ${i}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/5 backdrop-blur-md border border-white/10 mx-auto flex items-center justify-center shadow-[0_8px_30px_rgba(0,0,0,0.15)]",children:e.jsx("span",{className:"material-symbols-outlined text-white/50 text-3xl",children:"imagesmode"})}),e.jsx("p",{className:"text-white/50 text-sm mt-2",children:"Images coming soon"})]})});f.useEffect(()=>{if(t.length<=1)return;const c=setInterval(()=>{x("next"),a(!0),setTimeout(()=>{o(p=>p===t.length-1?0:p+1),a(!1)},150)},4e3);return()=>clearInterval(c)},[t.length]);const d=()=>{r||(x("prev"),a(!0),setTimeout(()=>{o(c=>c===0?t.length-1:c-1),a(!1)},150))},n=()=>{r||(x("next"),a(!0),setTimeout(()=>{o(c=>c===t.length-1?0:c+1),a(!1)},150))},g=c=>{r||c===l||(x(c>l?"next":"prev"),a(!0),setTimeout(()=>{o(c),a(!1)},150))},[u,y]=f.useState(!1),[w,k]=f.useState(null),C=()=>y(!0),N=()=>y(!1);f.useEffect(()=>{if(!u)return;const c=p=>{p.key==="Escape"&&N(),p.key==="ArrowRight"&&n(),p.key==="ArrowLeft"&&d()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[u]);const _=c=>k(c.changedTouches[0].clientX),j=c=>{if(w==null)return;const p=c.changedTouches[0].clientX-w;Math.abs(p)>40&&(p<0?n():d()),k(null)};return e.jsxs("div",{className:`relative w-full h-48 rounded-xl overflow-hidden group ${i}`,children:[e.jsxs("div",{className:"relative w-full h-full overflow-hidden cursor-zoom-in",onClick:C,children:[e.jsx("div",{className:`w-full h-full transition-all duration-500 ease-in-out ${r?s==="next"?"transform -translate-x-full opacity-0 scale-95":"transform translate-x-full opacity-0 scale-95":"transform translate-x-0 opacity-100 scale-100"}`,style:{backgroundImage:`url(${t[l]})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsx("img",{src:t[l],alt:`Service image ${l+1}`,className:`w-full h-full object-cover transition-all duration-700 ease-out ${r?"blur-sm scale-110":"blur-0 scale-100 group-hover:scale-105"}`,onClick:C,onError:c=>{c.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMjkzODJmIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=="}})}),r&&e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),d()},disabled:r,className:`absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all duration-300 hover:scale-110 hover:shadow-lg ${r?"opacity-30 cursor-not-allowed":"opacity-0 group-hover:opacity-100"}`,"aria-label":"Previous image",children:e.jsx("span",{className:`material-symbols-outlined text-sm transition-transform duration-200 ${r?"animate-pulse":""}`,children:"chevron_left"})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),n()},disabled:r,className:`absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all duration-300 hover:scale-110 hover:shadow-lg ${r?"opacity-30 cursor-not-allowed":"opacity-0 group-hover:opacity-100"}`,"aria-label":"Next image",children:e.jsx("span",{className:`material-symbols-outlined text-sm transition-transform duration-200 ${r?"animate-pulse":""}`,children:"chevron_right"})})]}),t.length>1&&e.jsx("div",{className:`absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded-full text-xs transition-all duration-300 ${r?"opacity-50 scale-95":"opacity-0 group-hover:opacity-100 scale-100"}`,children:e.jsxs("span",{className:"animate-fade-in-up",children:[l+1," / ",t.length]})})]}),t.length>1&&e.jsx("div",{className:`absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 transition-all duration-300 ${r?"opacity-50":"opacity-0 group-hover:opacity-100"}`,children:t.map((c,p)=>e.jsx("button",{onClick:I=>{I.stopPropagation(),g(p)},disabled:r,className:`w-2 h-2 rounded-full transition-all duration-300 hover:scale-125 ${p===l?"bg-white scale-125 shadow-lg animate-pulse":"bg-white/50 hover:bg-white/75 hover:shadow-md"} ${r?"cursor-not-allowed":"cursor-pointer"}`,"aria-label":`Go to image ${p+1}`},p))}),t.length>1&&e.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-2 transition-all duration-300 ${r?"opacity-50":"opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:"flex space-x-1 overflow-x-auto scrollbar-hide",children:t.map((c,p)=>e.jsx("button",{onClick:I=>{I.stopPropagation(),g(p)},disabled:r,className:`flex-shrink-0 w-8 h-8 rounded overflow-hidden border-2 transition-all duration-300 hover:scale-110 ${p===l?"border-white scale-110 shadow-lg ring-2 ring-white/30":"border-white/50 hover:border-white/75 hover:shadow-md"} ${r?"cursor-not-allowed opacity-50":"cursor-pointer"}`,style:{animationDelay:`${p*.1}s`},children:e.jsx("img",{src:c,alt:`Thumbnail ${p+1}`,className:`w-full h-full object-cover transition-all duration-300 ${p===l?"brightness-110":"brightness-75 hover:brightness-100"}`,onError:I=>{I.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iIzI5MzgyZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkU8L3RleHQ+PC9zdmc+"}})},p))})}),e.jsx($,{children:u&&e.jsxs(h.div,{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("button",{onClick:N,className:"absolute top-4 right-4 text-white/80 hover:text-white p-2 rounded-full hover:bg-white/10","aria-label":"Close",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"close"})}),e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center px-10 select-none",onTouchStart:_,onTouchEnd:j,children:[t.length>1&&e.jsx("button",{onClick:d,className:"absolute left-4 md:left-8 top-1/2 -translate-y-1/2 text-white/90 hover:text-white bg-white/10 hover:bg-white/20 p-3 rounded-full","aria-label":"Previous image",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"chevron_left"})}),e.jsx(h.img,{src:t[l],alt:`Service image ${l+1}`,className:"max-h-[80vh] max-w-[90vw] object-contain rounded-lg shadow-2xl",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:200,damping:24},onError:c=>{c.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjM1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMDAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2ZmZiIgZHk9Ii40ZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=="}},l),t.length>1&&e.jsx("button",{onClick:n,className:"absolute right-4 md:right-8 top-1/2 -translate-y-1/2 text-white/90 hover:text-white bg-white/10 hover:bg-white/20 p-3 rounded-full","aria-label":"Next image",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"chevron_right"})})]}),t.length>1&&e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 px-4",children:t.map((c,p)=>e.jsx("button",{onClick:()=>g(p),className:`w-14 h-14 rounded overflow-hidden border ${p===l?"border-white":"border-white/30"}`,children:e.jsx("img",{src:c,alt:`Thumbnail ${p+1}`,className:"w-full h-full object-cover"})},p))})]})})]})},Ie=({service:t,onBack:i,onEdit:l,onDelete:o})=>{const r=V(),[a,s]=f.useState(!1),[x,d]=f.useState({}),[n,g]=f.useState(null),[u,y]=f.useState(0),w=m=>{if(!m)return{};try{const b=typeof m=="string"?JSON.parse(m):m;return b&&typeof b=="object"?b:{}}catch{return{}}},k=async m=>{const b={};for(const[M,D]of Object.entries(m))if(D.images&&D.images.length>0){const Z=[];for(const P of D.images)try{let A=P;if(P.includes("/storage/v1/object/")){let z;if(P.includes("/public/guard_services/")?z=P.split("/storage/v1/object/public/guard_services/"):P.includes("/guard_services/")&&(z=P.split("/storage/v1/object/guard_services/")),z&&z.length>1)A=z[1];else continue}const{data:Y,error:F}=await S.storage.from("guard_services").createSignedUrl(A,60*60*24*7);if(F)continue;Z.push(Y.signedUrl)}catch{continue}b[M]=Z}return b};f.useEffect(()=>{const m=w(t.sub_category);m&&Object.keys(m).length>0&&k(m).then(d)},[t.sub_category]);const C=(m,b)=>{g(m),y(b)},N=()=>{g(null),y(0)},_=()=>{n&&u<n.length-1&&y(u+1)},j=()=>{n&&u>0&&y(u-1)};f.useEffect(()=>{const m=b=>{n&&(b.key==="Escape"?N():b.key==="ArrowRight"?_():b.key==="ArrowLeft"&&j())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[n,u]);const c={guards:{label:"Security Guards",icon:"security",color:"from-blue-500 to-cyan-500"},drones:{label:"Drone Services",icon:"drone",color:"from-orange-500 to-red-500"},agencies:{label:"Security Agencies",icon:"business",color:"from-green-500 to-emerald-500"},other:{label:"Other Services",icon:"more_horiz",color:"from-gray-500 to-gray-600"}},p=c[t.service_type]||c.other,I=w(t.sub_category),E=I&&Object.keys(I).length>0,W=async()=>{if(window.confirm(`Are you sure you want to delete "${t.name}"? This action cannot be undone.`)){s(!0);try{const{error:m}=await K.deleteHostService(t.id);if(m){alert("Failed to delete service: "+m.message);return}r("/dashboard/services")}catch(m){alert("Failed to delete service: "+m.message)}finally{s(!1)}}};return e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors group",children:[e.jsx("span",{className:"material-symbols-outlined group-hover:-translate-x-1 transition-transform",children:"arrow_back"}),e.jsx("span",{children:"Back to Services"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white/10 to-white/5 rounded-2xl p-8 border border-white/10 backdrop-blur-md",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"md:w-1/3",children:e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden shadow-2xl",children:e.jsx(ne,{images:t.images||[],className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"md:w-2/3 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${p.color} shadow-lg`,children:e.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:p.icon})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:t.name}),e.jsx("p",{className:"text-white/70 text-lg",children:p.label})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.is_active?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:t.is_active?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-400",children:"star"}),e.jsx("span",{className:"text-white font-medium",children:t.rating||0})]})]})]}),e.jsx("p",{className:"text-white/80 text-lg leading-relaxed",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-[var(--primary-color)]",children:t.total_bookings||0}),e.jsx("p",{className:"text-white/70 text-sm",children:"Total Bookings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white truncate max-w-[16rem] mx-auto",children:t.company_name||"—"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Company"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.rating||0}),e.jsx("p",{className:"text-white/70 text-sm",children:"Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:E?Object.keys(I).length:0}),e.jsx("p",{className:"text-white/70 text-sm",children:"Subcategories"})]})]})]})]})}),E&&e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-gradient-to-br from-white/10 to-white/5 rounded-2xl p-8 border border-white/10 backdrop-blur-md",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:`p-2 rounded-lg bg-gradient-to-br ${p.color}`,children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"category"})}),"Service Subcategories & Pricing"]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-400 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),e.jsx("span",{className:"font-medium",children:"Subcategory Images Storage"})]}),e.jsxs("p",{className:"text-white/70",children:["Images are stored in Supabase ",e.jsx("code",{className:"bg-white/10 px-1 rounded",children:"guard_services"})," bucket and should display automatically.",!E&&" No subcategories found - create a service with guard types to see images here."]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(I).map(([m,b])=>e.jsxs(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"bg-white/5 rounded-xl p-6 border border-white/10 hover:border-white/20 transition-all duration-300",children:[x[m]&&x[m].length>0&&e.jsxs("div",{className:"mb-4 rounded-lg overflow-hidden bg-white/5 cursor-pointer hover:opacity-90 transition-opacity group relative",onClick:()=>C(x[m],0),children:[e.jsx("img",{src:x[m][0],alt:b.label,className:"w-full h-32 object-cover",onError:M=>{M.target.style.display="none",M.target.parentElement.innerHTML=`
                          <div class="w-full h-32 flex items-center justify-center bg-white/5 text-white/50">
                            <span class="material-symbols-outlined">broken_image</span>
                          </div>
                        `}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white/0 group-hover:text-white/80 transition-colors text-2xl",children:"zoom_in"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:b.label}),e.jsx("div",{className:"flex items-center gap-2",children:x[m]&&x[m].length>0?e.jsxs("span",{className:"flex items-center gap-1 text-green-400 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"image"}),x[m].length," images"]}):e.jsxs("span",{className:"flex items-center gap-1 text-orange-400 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"image_not_supported"}),"No images"]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Hourly Rate:"}),e.jsxs("span",{className:"text-[var(--primary-color)] font-bold text-lg",children:[b.currency||"INR"," ",b.price_per_hour,"/hr"]})]}),b.description&&e.jsx("p",{className:"text-white/70 text-sm",children:b.description}),b.availability!==void 0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Available:"}),e.jsxs("span",{className:"text-green-400 font-medium",children:[b.availability," units"]})]}),x[m]&&x[m].length>1&&e.jsxs("div",{className:"pt-2",children:[e.jsxs("p",{className:"text-white/70 text-sm mb-2",children:["Additional Images (",x[m].length-1,"):"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:x[m].slice(1,4).map((M,D)=>e.jsxs("div",{className:"relative cursor-pointer hover:opacity-90 transition-opacity group",onClick:()=>C(x[m],D+1),children:[e.jsx("img",{src:M,alt:`${b.label} ${D+2}`,className:"w-full h-16 object-cover rounded bg-white/5",onError:Z=>{Z.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjMzMzMzMzIi8+CjxwYXRoIGQ9Ik0yNCAyMEwyNCA0NEwyMiA0NEwyMiAyMEgyNFoiIGZpbGw9IiM2NjY2NjYiLz4KPHBhdGggZD0iTTI2IDIySDQ0SDQ2VDQ2IDI0SDQ2VjQySDQ0SDI2SDI0VjIySDI2WiIgZmlsbD0iIzY2NjY2NiIvPgo8cGF0aCBkPSJNMjYgMjRIMzBIMzJIMzRIMzZIMzgyNEgzNkgzNFozMkgzMEgyNloyNFoyNFoiIGZpbGw9IiM2NjY2NjYiLz4KPC9zdmc+"}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center rounded",children:e.jsx("span",{className:"material-symbols-outlined text-white/0 group-hover:text-white/80 transition-colors text-lg",children:"zoom_in"})}),D===2&&x[m].length>4&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-xs font-bold",children:["+",x[m].length-4]})})]},D))})]})]})]},m))})]}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"bg-gradient-to-br from-white/10 to-white/5 rounded-2xl p-8 border border-white/10 backdrop-blur-md",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:`p-2 rounded-lg bg-gradient-to-br ${p.color}`,children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"location_on"})}),"Service Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(t.city||t.state)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Location"}),e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx("span",{className:"material-symbols-outlined text-[var(--primary-color)]",children:"location_on"}),e.jsxs("span",{children:[t.city,", ",t.state]})]})]}),t.specializations&&t.specializations.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Specializations"}),e.jsx("div",{className:"flex flex flex-wrap gap-2",children:t.specializations.map((m,b)=>e.jsx("span",{className:"px-3 py-1 bg-white/10 rounded-full text-sm text-white/80",children:m},b))})]}),t.equipment_included&&t.equipment_included.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Equipment Included"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.equipment_included.map((m,b)=>e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-full text-sm text-green-400",children:m},b))})]})]})]}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:()=>r(`/dashboard/services/${t.id}/edit`),className:"flex-1 bg-gradient-to-r from-[var(--primary-color)] to-[#2a5a3a] text-[#111714] py-4 px-6 rounded-xl font-bold text-lg hover:shadow-lg hover:shadow-[var(--primary-color)]/25 transition-all duration-300 ripple group",children:[e.jsx("span",{className:"material-symbols-outlined mr-2 group-hover:rotate-12 transition-transform",children:"edit"}),"Edit Service"]}),e.jsx("button",{onClick:W,disabled:a,className:"flex-1 bg-red-500/20 text-red-400 py-4 px-6 rounded-xl font-bold text-lg hover:bg-red-500/30 hover:shadow-lg hover:shadow-red-500/25 transition-all duration-300 ripple group disabled:opacity-50",children:a?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined mr-2 group-hover:scale-110 transition-transform",children:"delete"}),"Delete Service"]})})]}),n&&e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4",onClick:N,children:[e.jsx("button",{onClick:N,className:"absolute top-4 right-4 z-10 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"close"})}),n.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),j()},disabled:u===0,className:"absolute left-4 z-10 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"chevron_left"})}),e.jsx("button",{onClick:m=>{m.stopPropagation(),_()},disabled:u===n.length-1,className:"absolute right-4 z-10 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"chevron_right"})})]}),e.jsxs("div",{className:"relative max-w-full max-h-full",onClick:m=>m.stopPropagation(),children:[e.jsx("img",{src:n[u],alt:`Image ${u+1}`,className:"max-w-full max-h-full object-contain rounded-lg",onError:m=>{m.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjMzMzMzMzIi8+CjxwYXRoIGQ9Ik0yNCAyMEwyNCA0NEwyMiA0NEwyMiAyMEgyNFoiIGZpbGw9IiM2NjY2NjYiLz4KPHBhdGggZD0iTTI2IDIySDQ0SDQ2VDQ2IDI0SDQ2VjQySDQ0SDI2SDI0VjIySDI2WiIgZmlsbD0iIzY2NjY2NiIvPgo8cGF0aCBkPSJNMjYgMjRIMzBIMzJIMzRIMzZIMzgyNEgzNkgzNFozMkgzMEgyNloyNFoyNFoiIGZpbGw9IiM2NjY2NjYiLz4KPC9zdmc+"}}),n.length>1&&e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[u+1," / ",n.length]})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 text-white/70 text-sm",children:[e.jsxs("p",{children:["Press ",e.jsx("kbd",{className:"bg-white/20 px-1 rounded",children:"ESC"})," to close"]}),n.length>1&&e.jsxs("p",{children:["Use ",e.jsx("kbd",{className:"bg-white/20 px-1 rounded",children:"←"})," ",e.jsx("kbd",{className:"bg-white/20 px-1 rounded",children:"→"})," to navigate"]})]})]})]})},Se=({className:t="",children:i})=>e.jsx("div",{className:`rounded-2xl p-6 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)] ${t}`,children:i}),ke=({children:t,className:i="",...l})=>e.jsx("button",{...l,className:`bg-gradient-to-r from-[var(--primary-color)] via-emerald-400 to-[#2a5a3a] text-[#111714] px-6 py-3 rounded-full font-bold shadow-[0_10px_30px_rgba(74,222,128,0.25)] hover:shadow-[0_18px_40px_rgba(74,222,128,0.35)] transition-all duration-300 ${i}`,children:t}),Ce=async(t,i,l)=>{try{if(!l||l.length===0)return[];const o=[];for(let r=0;r<l.length;r++){const a=l[r];if(!a.type.startsWith("image/"))throw new Error(`File ${a.name} is not an image`);if(a.size>5*1024*1024)throw new Error(`File ${a.name} is too large. Maximum size is 5MB`);const s=a.name.split(".").pop(),x=`${Date.now()}-${Math.random().toString(36).substring(2)}.${s}`,d=`${i}/${t}/${x}`,{data:n,error:g}=await S.storage.from("service-images").upload(d,a,{cacheControl:"3600",upsert:!1});if(g)throw new Error(`Failed to upload ${a.name}: ${g.message}`);const{data:{publicUrl:u}}=S.storage.from("service-images").getPublicUrl(d);o.push(u)}return o}catch(o){throw o}},De=async(t,i)=>{try{const{data:l,error:o}=await S.from("host_services").update({images:i}).eq("id",t).select();if(o)throw new Error(`Failed to update service images: ${o.message}`);return l}catch(l){throw l}},_e=async(t,i,l,o)=>{try{if(!o||o.length===0)return[];const r=[];for(let a=0;a<o.length;a++){const s=o[a];if(!s.type.startsWith("image/"))throw new Error(`File ${s.name} is not an image`);if(s.size>5*1024*1024)throw new Error(`File ${s.name} is too large. Maximum size is 5MB`);const x=s.name.split(".").pop(),d=`${Date.now()}-${Math.random().toString(36).substring(2)}.${x}`,n=`${i}/${t}/${l}/${d}`,{data:g,error:u}=await S.storage.from("guard_services").upload(n,s,{cacheControl:"3600",upsert:!1});if(u)throw new Error(`Failed to upload ${s.name}: ${u.message}`);const{data:y,error:w}=await S.storage.from("guard_services").createSignedUrl(n,60*60*24*365);if(w)throw new Error(`Failed to create signed URL for ${s.name}: ${w.message}`);r.push(n)}return r}catch(r){throw r}},oe=t=>{const i=[],o=["image/jpeg","image/png","image/webp","image/gif"];for(let r of t)o.includes(r.type)||i.push(`${r.name}: Only JPEG, PNG, WebP, and GIF images are allowed`),r.size>5242880&&i.push(`${r.name}: File size must be less than 5MB`);return i},Me=({images:t=[],onImagesChange:i,maxImages:l=5,disabled:o=!1})=>{const[r,a]=f.useState(!1),[s,x]=f.useState(!1),[d,n]=f.useState(null),g=f.useRef(null),u=j=>{const c=Array.from(j);if(t.length+c.length>l){n(`Maximum ${l} images allowed. You can add ${l-t.length} more.`);return}const p=oe(c);if(p.length>0){n(p.join(", "));return}n(null),i([...t,...c])},y=j=>{if(j.preventDefault(),a(!1),o)return;const c=j.dataTransfer.files;u(c)},w=j=>{j.preventDefault(),o||a(!0)},k=j=>{j.preventDefault(),a(!1)},C=j=>{const c=j.target.files;c.length>0&&u(c),j.target.value=""},N=j=>{const c=t.filter((p,I)=>I!==j);i(c),n(null)},_=()=>{o||g.current?.click()};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-6 text-center transition-all duration-300 cursor-pointer ${r?"border-[var(--primary-color)] bg-[var(--primary-color)]/10":"border-[#29382f] hover:border-[var(--primary-color)]/50"} ${o?"opacity-50 cursor-not-allowed":""}`,onDrop:y,onDragOver:w,onDragLeave:k,onClick:_,children:[e.jsx("input",{ref:g,type:"file",multiple:!0,accept:"image/*",onChange:C,className:"hidden",disabled:o}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-gradient-to-br from-[var(--primary-color)] to-[#2a5a3a] rounded-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-[#111714] text-xl",children:s?"hourglass_empty":"add_photo_alternate"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s?"Uploading...":"Upload Service Images"}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Drag & drop images here or click to browse"}),e.jsxs("p",{className:"text-white/40 text-xs mt-1",children:["Max ",l," images, 5MB each (JPEG, PNG, WebP, GIF)"]})]})]})]}),d&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-400 text-sm",children:"error"}),e.jsx("p",{className:"text-red-400 text-sm",children:d})]})}),t.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-white font-medium",children:["Selected Images (",t.length,"/",l,")"]}),!o&&e.jsx("button",{onClick:_,className:"text-[var(--primary-color)] hover:text-[#2a5a3a] text-sm font-medium transition-colors",children:"Add More"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.map((j,c)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-[#29382f]",children:typeof j=="string"?e.jsx("img",{src:j,alt:`Service image ${c+1}`,className:"w-full h-full object-cover",onError:p=>{p.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMjkzODJmIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg=="}}):e.jsx("img",{src:URL.createObjectURL(j),alt:`Preview ${c+1}`,className:"w-full h-full object-cover"})}),!o&&e.jsx("button",{onClick:()=>N(c),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110","aria-label":"Remove image",children:e.jsx("span",{className:"material-symbols-outlined text-xs",children:"close"})})]},c))})]})]})};export{ye as B,fe as C,Ne as D,xe as E,we as G,Me as I,pe as K,ge as L,je as N,ke as P,be as S,ve as V,he as _,Ie as a,ne as b,Se as c,De as d,_e as e,ue as f,Ce as u};
