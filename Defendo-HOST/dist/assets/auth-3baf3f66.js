import{r as g,j as e,u as k,a as I,L as w}from"./react-vendor-2b1ec00c.js";import{c as E}from"./supabase-vendor-3212d0ae.js";import{m as _}from"./ui-vendor-ac3c59fb.js";const q={}.VITE_SUPABASE_URL||"https://grmutjpyqzupdoimrtcg.supabase.co",D={}.VITE_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdybXV0anB5cXp1cGRvaW1ydGNnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2MDg3NjQsImV4cCI6MjA2NzE4NDc2NH0.V_a4lnzTIQvWY2aT1et5u9AP7zvz_DFqSRg5LTiyJgw",H=String({}.VITE_SUPABASE_DEBUG||"").toLowerCase()==="true";let S;typeof window<"u"&&window.__SUPABASE__?S=window.__SUPABASE__:(S=E(q,D,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"defendo-host@1.0.0"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),typeof window<"u"&&(window.__SUPABASE__=S));const o=S,P=String({}.VITE_DISABLE_REALTIME||"").toLowerCase()==="true";if(P&&typeof window<"u")try{o.realtime.removeAllChannels(),o.realtime.disconnect(),o.channel?.bind?.(o)&&(o.channel=(...t)=>({subscribe:()=>({subscription:{state:"closed"}})}))}catch{}const N={getHostProfile:async r=>{const{data:t,error:s}=await o.from("host_profiles").select("*").eq("id",r).single();return{data:t,error:s}},updateHostProfile:async(r,t)=>{const{data:s,error:a}=await o.from("host_profiles").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select();return{data:s,error:a}},getHostBookings:async r=>{const{data:t,error:s}=await o.from("bookings").select("id, status, date, created_at, service_type, price, payment_status, user_id, host_id:provider_id, start_time, end_time, location, user_notes").eq("provider_id",r).order("created_at",{ascending:!1});return{data:t,error:s}},updateBookingStatus:async(r,t)=>{const{data:s,error:a}=await o.from("bookings").update({status:t,updated_at:new Date().toISOString()}).eq("id",r).select();return{data:s,error:a}},getEmergencyContacts:async r=>{const{data:t,error:s}=await o.from("emergency_contacts").select("*").eq("user_id",r).order("is_primary",{ascending:!1});return{data:t,error:s}},addEmergencyContact:async(r,t)=>{const{data:s,error:a}=await o.from("emergency_contacts").insert({user_id:r,...t}).select();return{data:s,error:a}},getHostServices:async r=>{const{data:t,error:s}=await o.from("host_services").select("*").eq("provider_id",r).order("created_at",{ascending:!1});return{data:t,error:s}},getHostServiceById:async r=>{const{data:t,error:s}=await o.from("host_services").select("*").eq("id",r).single();return{data:t,error:s}},addHostService:async(r,t)=>{const{data:s,error:a}=await o.from("host_services").insert({provider_id:r,...t}).select();return{data:s,error:a}},updateHostService:async(r,t)=>{const{data:s,error:a}=await o.from("host_services").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select();return{data:s,error:a}},deleteHostService:async r=>{const{data:t,error:s}=await o.from("host_services").delete().eq("id",r);return{data:t,error:s}},getAllActiveServices:async()=>{const{data:r,error:t}=await o.from("host_services").select(`
        *,
        host_profiles!inner(
          id,
          full_name,
          company_name,
          rating,
          verified
        )
      `).eq("is_active",!0).order("rating",{ascending:!1});return{data:r,error:t}},getActiveServiceCount:async r=>{const{count:t,error:s,data:a}=await o.from("host_services").select("id",{count:"exact"}).eq("provider_id",r).eq("is_active",!0);if(s)return{count:0,error:s};if((t===null||t===0)&&Array.isArray(a)&&a.length>0)return{count:a.length,error:null};if(!t){const{data:l,error:n}=await o.from("host_services").select("id").eq("provider_id",r).eq("is_active",!0);return{count:(l||[]).length,error:n||null}}return{count:t||0,error:null}},getAllServicesCount:async r=>{const{count:t,error:s,data:a}=await o.from("host_services").select("id",{count:"exact"}).eq("provider_id",r);if(s)return{count:0,error:s};if((t===null||t===0)&&Array.isArray(a)&&a.length>0)return{count:a.length,error:null};if(!t){const{data:l,error:n}=await o.from("host_services").select("id").eq("provider_id",r);return{count:(l||[]).length,error:n||null}}return{count:t||0,error:null}},getTotalBookingsCount:async r=>{const{count:t,error:s}=await o.from("bookings").select("id",{count:"exact",head:!0}).eq("provider_id",r);return{count:t||0,error:s}},getUpcomingBookingsCount:async r=>{const t=new Date().toISOString(),{count:s,error:a}=await o.from("bookings").select("id",{count:"exact",head:!0}).eq("provider_id",r).gte("date",t).in("status",["pending","confirmed"]);return{count:s||0,error:a}},getCompletedBookingsCount:async r=>{const{count:t,error:s}=await o.from("bookings").select("id",{count:"exact",head:!0}).eq("provider_id",r).eq("status","completed");return{count:t||0,error:s}},getMonthlyRevenue:async r=>{const t=new Date;t.setDate(1),t.setHours(0,0,0,0);const{data:s,error:a}=await o.from("bookings").select("price, payment_status, date").eq("provider_id",r).gte("date",t.toISOString());return a?{revenue:0,error:a}:{revenue:(s||[]).filter(n=>(n.payment_status||"").toLowerCase()==="paid").reduce((n,d)=>n+(Number(d.price)||0),0),error:null}},getMonthlyAnalytics:async(r,t=6)=>{const s=new Date,a=new Date;a.setMonth(s.getMonth()-(t-1)),a.setDate(1),a.setHours(0,0,0,0);const{data:l,error:n}=await o.from("bookings").select("price, payment_status, date").eq("provider_id",r).gte("date",a.toISOString().slice(0,10)).lte("date",s.toISOString().slice(0,10));if(n)return{data:[],error:n};const d=new Map;for(let c=0;c<t;c++){const i=new Date(a);i.setMonth(a.getMonth()+c);const m=i.toISOString().slice(0,7);d.set(m,{name:i.toLocaleString("en-US",{month:"short"}),bookings:0,revenue:0})}return(l||[]).forEach(c=>{const i=(c.date||"").slice(0,7);if(d.has(i)){const m=d.get(i);m.bookings+=1,(c.payment_status||"").toLowerCase()==="paid"&&(m.revenue+=Number(c.price)||0)}}),{data:Array.from(d.values()),error:null}},getTotalEarnings:async r=>{const{data:t,error:s}=await o.from("bookings").select("price, payment_status").eq("provider_id",r);return s?{revenue:0,error:s}:{revenue:(t||[]).filter(l=>(l.payment_status||"").toLowerCase()==="paid").reduce((l,n)=>l+(Number(n.price)||0),0),error:null}},getHostRating:async r=>{const{data:t,error:s}=await o.from("host_profiles").select("rating").eq("id",r).single();return{rating:t?.rating||0,error:s}},getRecentBookings:async(r,t=5)=>{const{data:s,error:a}=await o.from("bookings").select("id, service_type, status, created_at, price, host_id:provider_id").eq("provider_id",r).order("created_at",{ascending:!1}).limit(t);return{data:s||[],error:a}},getUpcomingBookingsDetailed:async(r,t=5)=>{const s=new Date().toISOString(),{data:a,error:l}=await o.from("bookings").select("id, service_type, status, date, start_time, end_time, location, user_id").eq("provider_id",r).gte("date",s).in("status",["pending","confirmed"]).order("date",{ascending:!0}).limit(t);if(l)return{data:[],error:l};const n=Array.from(new Set((a||[]).map(i=>i.user_id).filter(Boolean)));let d=new Map;if(n.length){const{data:i,error:m}=await o.from("profiles").select("id, full_name").in("id",n);!m&&i&&(d=new Map(i.map(h=>[h.id,h.full_name])))}return{data:(a||[]).map(i=>({...i,customer_name:d.get(i.user_id)||"Customer"})),error:null}},createBooking:async({providerId:r,serviceType:t,date:s,startTime:a,endTime:l,price:n,currency:d="INR",userNotes:c="",location:i=null})=>{const{data:m}=await o.auth.getUser(),j={user_id:m?.user?.id,provider_id:r,service_type:t,date:s,start_time:a||null,end_time:l||null,price:n??0,currency:d,user_notes:c||"",location:i||null,status:"pending"},{data:f,error:v}=await o.from("bookings").insert(j).select("id, user_id, provider_id, service_type, date, start_time, end_time, price, currency, status").single();return{data:f,error:v}},getHostBookingSummaries:async(r,t=20)=>{const{data:s,error:a}=await o.from("host_booking_summaries").select("id, service_type, date, start_time, end_time, user_name").order("start_time",{ascending:!1}).limit(t);return{data:s||[],error:a}},getUserBookingSummaries:async(r,t=20)=>{const{data:s,error:a}=await o.from("bookings").select("id, service_type, price, currency, date, start_time, end_time, status").eq("user_id",r).order("date",{ascending:!1}).limit(t);return{data:s||[],error:a}},getDailyBookingsStats:async(r,t=7)=>{const s=new Date;s.setDate(s.getDate()-(t-1)),s.setHours(0,0,0,0);const{data:a,error:l}=await o.from("bookings").select("id, created_at").eq("provider_id",r).gte("created_at",s.toISOString());if(l)return{data:[],error:l};const n=new Map;for(let c=0;c<t;c++){const i=new Date(s);i.setDate(s.getDate()+c);const m=i.toISOString().slice(0,10);n.set(m,0)}return(a||[]).forEach(c=>{const i=(c.created_at||"").slice(0,10);n.has(i)&&n.set(i,(n.get(i)||0)+1)}),{data:Array.from(n.entries()).map(([c,i])=>({date:c,count:i})),error:null}},getHostStats:async r=>{const[t,s,a,l,n,d,c]=await Promise.all([N.getActiveServiceCount(r),N.getAllServicesCount(r),N.getTotalBookingsCount(r),N.getMonthlyRevenue(r),N.getHostRating(r),N.getUpcomingBookingsCount(r),N.getCompletedBookingsCount(r)]);return{activeServices:t.count||0,allServices:s.count||0,totalBookings:a.count||0,monthlyRevenue:l.revenue||0,rating:n.rating||0,upcomingBookings:d.count||0,completedBookings:c.count||0,error:t.error||a.error||l.error||n.error||null}}},A=g.createContext(),z=({children:r})=>{const[t,s]=g.useState(null),[a,l]=g.useState(null),[n,d]=g.useState(!0),c=async()=>{const{data:{session:u},error:x}=await o.auth.getSession();u?.user?(s(u.user),await i(u.user.id)):(s(null),l(null)),d(!1)},i=async u=>{if(!u)return;const{data:x,error:p}=await o.from("host_profiles").select("*").eq("id",u).maybeSingle();p||l(x),await m(u)},m=async u=>{const{data:x,error:p}=await o.from("super_admins").select("*").eq("id",u).maybeSingle();p||x&&l(b=>({...b,is_super_admin:!0}))};g.useEffect(()=>{c();const{data:{subscription:u}}=o.auth.onAuthStateChange(async(x,p)=>{p?.user?(s(p.user),await i(p.user.id)):(s(null),l(null))});return()=>u.unsubscribe()},[]);const y={user:t,hostProfile:a,profile:a,loading:n,signIn:async(u,x)=>{try{d(!0);const{data:p,error:b}=await o.auth.signInWithPassword({email:u,password:x});return b?{success:!1,error:b.message}:p.user?(s(p.user),await i(p.user.id),{success:!0,user:p.user}):{success:!1,error:"No user data returned"}}catch(p){return{success:!1,error:p.message}}finally{d(!1)}},signUp:async(u,x,p={})=>{try{d(!0);const{data:b,error:C}=await o.auth.signUp({email:u,password:x,options:{data:p}});return C?{success:!1,error:C.message}:b.user?(s(b.user),{success:!0,user:b.user}):{success:!1,error:"No user data returned"}}catch(b){return{success:!1,error:b.message}}finally{d(!1)}},signOut:async()=>{try{d(!0);const{error:u}=await o.auth.signOut();return u?{success:!1,error:u.message}:(s(null),l(null),{success:!0})}catch(u){return{success:!1,error:u.message}}finally{d(!1)}},refreshProfile:async()=>{t?.id&&await i(t.id)}};return e.jsx(A.Provider,{value:y,children:r})},L=()=>{const r=g.useContext(A);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},B=()=>{const[r,t]=g.useState({email:"",password:""}),[s,a]=g.useState(!1),{signIn:l,error:n,clearError:d}=L(),c=k(),m=I().state?.from?.pathname||"/dashboard",h=f=>{const{name:v,value:y}=f.target;t(u=>({...u,[v]:y})),n&&d()},j=async f=>{f.preventDefault(),a(!0);try{(await l(r.email,r.password)).success&&setTimeout(()=>{c(m,{replace:!0})},100)}catch{}finally{a(!1)}};return e.jsxs("div",{className:"bg-gradient-to-br from-[#0a0f0b] via-[#111714] to-[#0a0f0b] text-white min-h-screen flex flex-col relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[var(--primary-color)]/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-2000"})]}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-[var(--primary-color)] rounded-full animate-ping opacity-60"}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-40 delay-500"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1.5 h-1.5 bg-[var(--primary-color)] rounded-full animate-ping opacity-50 delay-1000"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-30 delay-1500"})]}),e.jsxs("header",{className:"relative z-10 flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#29382f]/50 px-10 py-4 backdrop-blur-sm",children:[e.jsxs(w,{to:"/",className:"flex items-center gap-3 text-white group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-[var(--primary-color)]/10 group-hover:bg-[var(--primary-color)]/20 transition-all duration-300",children:e.jsxs("svg",{className:"h-6 w-6 text-[var(--primary-color)] group-hover:scale-110 transition-transform duration-300",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{clipRule:"evenodd",d:"M24 18.4228L42 11.475V34.3663C42 34.7796 41.7457 35.1504 41.3601 35.2992L24 42V18.4228Z",fill:"currentColor",fillRule:"evenodd"}),e.jsx("path",{clipRule:"evenodd",d:"M24 8.18819L33.4123 11.574L24 15.2071L14.5877 11.574L24 8.18819ZM9 15.8487L21 20.4805V37.6263L9 32.9945V15.8487ZM27 37.6263V20.4805L39 15.8487V32.9945L27 37.6263ZM25.354 2.29885C24.4788 1.98402 23.5212 1.98402 22.646 2.29885L4.98454 8.65208C3.7939 9.08038 3 10.2097 3 11.475V34.3663C3 36.0196 4.01719 37.5026 5.55962 38.098L22.9197 44.7987C23.6149 45.0671 24.3851 45.0671 25.0803 44.7987L42.4404 38.098C43.9828 37.5026 45 36.0196 45 34.3663V11.475C45 10.2097 44.2061 9.08038 43.0155 8.65208L25.354 2.29885Z",fill:"currentColor",fillRule:"evenodd"})]})}),e.jsx("h1",{className:"text-xl font-bold tracking-tight group-hover:text-[var(--primary-color)] transition-colors duration-300",children:"Defendo Host"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(w,{to:"/",className:"text-sm font-medium text-gray-300 hover:text-white transition-colors relative group",children:["Home",e.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-[var(--primary-color)] transition-all duration-300 group-hover:w-full"})]}),e.jsxs(w,{to:"/signup",className:"group flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-6 bg-gradient-to-r from-[var(--primary-color)] to-[#2a5a3a] text-[#111714] text-sm font-bold leading-normal tracking-wide hover:shadow-lg hover:shadow-[var(--primary-color)]/25 transition-all duration-300 relative",children:[e.jsx("span",{className:"relative z-10 truncate",children:"Sign Up"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]})]})]}),e.jsx("main",{className:"relative z-10 flex flex-1 items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-[#1a241e]/80 backdrop-blur-xl border border-[#29382f]/50 rounded-2xl p-8 shadow-2xl shadow-black/20",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[var(--primary-color)] to-[#2a5a3a] rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-[var(--primary-color)]/25",children:e.jsx("span",{className:"material-symbols-outlined text-[#111714] text-2xl",children:"security"})}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white mb-2",children:"Welcome Back"}),e.jsxs("p",{className:"text-gray-400",children:["Or",e.jsx(w,{to:"/signup",className:"font-medium text-[var(--primary-color)] hover:text-opacity-80 ml-1 transition-colors",children:"start your 14-day free trial"})]})]}),n&&e.jsx("div",{className:"mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 text-sm font-medium",children:n==="Invalid login credentials"?"Invalid email or password. Please check your credentials and try again.":n==="Login timeout after 5 seconds"?"Login request timed out. Please check your internet connection and try again.":n}),n==="Invalid login credentials"&&e.jsxs("p",{className:"text-red-300 text-xs mt-1",children:["Don't have an account? ",e.jsx(w,{to:"/signup",className:"underline hover:text-red-200",children:"Sign up here"})]})]})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"mail"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"email-address",name:"email",placeholder:"user@example.com",type:"email",value:r.email,onChange:h,required:!0})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"lock"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"password",name:"password",placeholder:"••••••••",type:"password",value:r.password,onChange:h,required:!0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center group",children:[e.jsx("input",{className:"h-4 w-4 rounded border-[#3d5245] bg-[#111714]/50 text-[var(--primary-color)] focus:ring-[var(--primary-color)]/20 focus:ring-2",id:"remember-me",name:"remember-me",type:"checkbox"}),e.jsx("label",{className:"ml-3 block text-sm text-gray-300 group-hover:text-white transition-colors",htmlFor:"remember-me",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{className:"font-medium text-[var(--primary-color)] hover:text-opacity-80 transition-colors",href:"#",children:"Forgot password?"})})]}),e.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-xl text-sm font-bold text-[#111714] bg-gradient-to-r from-[var(--primary-color)] to-[#2a5a3a] hover:shadow-lg hover:shadow-[var(--primary-color)]/25 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-[#111714] border-t-transparent rounded-full animate-spin"}),"Signing In..."]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:"Log In"}),e.jsx("span",{className:"material-symbols-outlined group-hover:translate-x-1 transition-transform duration-300",children:"arrow_forward"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-400",children:["Don't have an account?",e.jsx(w,{to:"/signup",className:"font-medium text-[var(--primary-color)] hover:text-opacity-80 ml-1 transition-colors",children:"Sign Up"})]})})]})})})]})},V=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"})),T=()=>{const[r,t]=g.useState({userType:"host",fullName:"",companyName:"",email:"",phone:"",address:"",password:"",confirmPassword:""}),[s,a]=g.useState(!1),[l,n]=g.useState(!1),[d,c]=g.useState(null),{signUp:i,error:m,clearError:h}=L(),j=k(),f=y=>{const{name:u,value:x}=y.target;t(p=>({...p,[u]:x})),m&&h()},v=async y=>{if(y.preventDefault(),r.password!==r.confirmPassword)return;a(!0);const u={role:r.userType,full_name:r.fullName,company_name:r.companyName,phone:r.phone,address:r.address},x=await i(r.email,r.password,u);x.success&&(c(x),n(!0),x.data?.user?j("/dashboard"):setTimeout(()=>{j("/login")},3e3)),a(!1)};return l?e.jsxs("div",{className:"bg-[#111714] text-white min-h-screen flex flex-col",children:[e.jsx("header",{className:"flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#29382f] px-10 py-4",children:e.jsxs(w,{to:"/",className:"flex items-center gap-3 text-white",children:[e.jsx("svg",{className:"h-8 w-8 text-[var(--primary-color)]",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 42.4379C4 42.4379 14.0962 36.0744 24 41.1692C35.0664 46.8624 44 42.2078 44 42.2078L44 7.01134C44 7.01134 35.068 11.6577 24.0031 5.96913C14.0971 0.876274 4 7.27094 4 7.27094L4 42.4379Z",fill:"currentColor"})}),e.jsx("h2",{className:"text-xl font-bold tracking-tighter",children:"Defendo Host"})]})}),e.jsx("main",{className:"flex flex-1 items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md space-y-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[var(--primary-color)] rounded-full flex items-center justify-center mx-auto",children:e.jsx("span",{className:"material-symbols-outlined text-[#111714] text-2xl",children:"check"})}),e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Account Created!"}),e.jsx("p",{className:"text-gray-400",children:d?.data?.user?"Welcome to Defendo! Redirecting to your dashboard...":"Please check your email to verify your account. You'll be redirected to login shortly."})]})})]}):e.jsxs("div",{className:"bg-gradient-to-br from-[#0a0f0b] via-[#111714] to-[#0a0f0b] text-white min-h-screen flex flex-col relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[var(--primary-color)]/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-2000"})]}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-[var(--primary-color)] rounded-full animate-ping opacity-60"}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-40 delay-500"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1.5 h-1.5 bg-[var(--primary-color)] rounded-full animate-ping opacity-50 delay-1000"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-30 delay-1500"})]}),e.jsxs("header",{className:"relative z-10 flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#29382f]/50 px-10 py-4 backdrop-blur-sm",children:[e.jsxs(w,{to:"/",className:"flex items-center gap-3 text-white group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-[var(--primary-color)]/10 group-hover:bg-[var(--primary-color)]/20 transition-all duration-300",children:e.jsx("svg",{className:"h-6 w-6 text-[var(--primary-color)] group-hover:scale-110 transition-transform duration-300",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 42.4379C4 42.4379 14.0962 36.0744 24 41.1692C35.0664 46.8624 44 42.2078 44 42.2078L44 7.01134C44 7.01134 35.068 11.6577 24.0031 5.96913C14.0971 0.876274 4 7.27094 4 7.27094L4 42.4379Z",fill:"currentColor"})})}),e.jsx("h1",{className:"text-xl font-bold tracking-tight group-hover:text-[var(--primary-color)] transition-colors duration-300",children:"Defendo Host"})]}),e.jsx("div",{className:"flex items-center gap-6 text-sm",children:e.jsxs(w,{to:"/login",className:"group flex items-center gap-2 rounded-full bg-[#29382f] px-5 py-2.5 font-semibold hover:bg-[#3d5245] transition-all duration-300 relative overflow-hidden",children:[e.jsx("span",{className:"relative z-10",children:"Log In"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]})})]}),e.jsx("main",{className:"relative z-10 flex flex-1 items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-[#1a241e]/80 backdrop-blur-xl border border-[#29382f]/50 rounded-2xl p-8 shadow-2xl shadow-black/20",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[var(--primary-color)] to-[#2a5a3a] rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-[var(--primary-color)]/25",children:e.jsx("span",{className:"material-symbols-outlined text-[#111714] text-2xl",children:"person_add"})}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white mb-2",children:r.userType==="host"?"Join Defendo Host":"Join Defendo"}),e.jsx("p",{className:"text-gray-400",children:r.userType==="host"?"Register as a security service provider and start offering your services.":"Create your account to book security services and stay protected."})]}),m&&e.jsx("div",{className:"mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),e.jsx("p",{className:"text-red-400 text-sm",children:m})]})}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-3",children:"Register as:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>t(y=>({...y,userType:"host"})),className:`p-4 rounded-xl border-2 transition-all duration-300 ${r.userType==="host"?"border-[var(--primary-color)] bg-[var(--primary-color)]/10 text-[var(--primary-color)]":"border-[#3d5245] bg-[#111714]/50 text-gray-400 hover:border-[var(--primary-color)]/50"}`,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"security"}),e.jsx("span",{className:"font-medium",children:"Security Provider"}),e.jsx("span",{className:"text-xs opacity-75",children:"Offer security services"})]})}),e.jsx("button",{type:"button",onClick:()=>t(y=>({...y,userType:"user"})),className:`p-4 rounded-xl border-2 transition-all duration-300 ${r.userType==="user"?"border-[var(--primary-color)] bg-[var(--primary-color)]/10 text-[var(--primary-color)]":"border-[#3d5245] bg-[#111714]/50 text-gray-400 hover:border-[var(--primary-color)]/50"}`,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"person"}),e.jsx("span",{className:"font-medium",children:"Regular User"}),e.jsx("span",{className:"text-xs opacity-75",children:"Book security services"})]})})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"person"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"full-name",name:"fullName",placeholder:"Full Name",type:"text",value:r.fullName,onChange:f,required:!0})]}),r.userType==="host"&&e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"apartment"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"company-name",name:"companyName",placeholder:"Company Name",type:"text",value:r.companyName,onChange:f,required:!0})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"mail"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"email-address",name:"email",placeholder:"Email address",type:"email",value:r.email,onChange:f,required:!0})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"phone"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"contact-info",name:"phone",placeholder:"Phone Number",type:"tel",value:r.phone,onChange:f,required:!0})]}),r.userType==="host"&&e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"location_on"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"address",name:"address",placeholder:"Business Address",type:"text",value:r.address,onChange:f,required:!0})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"lock"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"password",name:"password",placeholder:"Password",type:"password",value:r.password,onChange:f,required:!0})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 group-focus-within:text-[var(--primary-color)] transition-colors duration-300",children:"lock"})}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-[#111714]/50 border border-[#3d5245] rounded-xl text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 backdrop-blur-sm",id:"confirm-password",name:"confirmPassword",placeholder:"Confirm Password",type:"password",value:r.confirmPassword,onChange:f,required:!0})]})]}),r.password&&r.confirmPassword&&r.password!==r.confirmPassword&&e.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"error"}),e.jsx("span",{children:"Passwords do not match"})]}),e.jsx("button",{type:"submit",disabled:s||r.password!==r.confirmPassword,className:"group relative w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-xl text-sm font-bold text-[#111714] bg-gradient-to-r from-[var(--primary-color)] to-[#2a5a3a] hover:shadow-lg hover:shadow-[var(--primary-color)]/25 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-[#111714] border-t-transparent rounded-full animate-spin"}),"Creating Account..."]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:"Create Account"}),e.jsx("span",{className:"material-symbols-outlined group-hover:translate-x-1 transition-transform duration-300",children:"arrow_forward"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-400",children:["Already have an account?",e.jsx(w,{to:"/login",className:"font-medium text-[var(--primary-color)] hover:text-opacity-80 ml-1 transition-colors",children:"Log in"})]})})]})})})]})},J=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));function U(){const[r,t]=g.useState(""),[s,a]=g.useState(""),[l,n]=g.useState(!1),[d,c]=g.useState(""),i=k(),m=async h=>{h.preventDefault(),n(!0),c("");try{const{data:j,error:f}=await o.auth.signInWithPassword({email:r,password:s});if(f){c(f.message);return}const{data:v,error:y}=await o.from("super_admins").select("email").eq("email",r).maybeSingle();if(y||!v){c("Not authorized as admin."),await o.auth.signOut();return}i("/admin-dashboard")}catch{c("An unexpected error occurred.")}finally{n(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative z-10 w-full max-w-md",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-br from-[var(--primary-color)] to-teal-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:"admin_panel_settings"})}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Admin Login"}),e.jsx("p",{className:"text-white/60",children:"Access the admin dashboard"})]}),d&&e.jsx(_.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-6 text-sm",children:d}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Admin Email"}),e.jsx("input",{type:"email",placeholder:"admin@example.com",value:r,onChange:h=>t(h.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/50 focus:border-[var(--primary-color)]/50 transition-all duration-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Admin Password"}),e.jsx("input",{type:"password",placeholder:"••••••••",value:s,onChange:h=>a(h.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/50 focus:border-[var(--primary-color)]/50 transition-all duration-300",required:!0})]}),e.jsx(_.button,{type:"submit",disabled:l,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-[var(--primary-color)] to-teal-400 text-white py-3 px-6 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Signing In..."]}):"Sign In"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-white/40 text-sm",children:"Authorized personnel only"})})]})})]})}const Z=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));export{z as A,V as L,J as S,Z as a,N as d,o as s,L as u};
