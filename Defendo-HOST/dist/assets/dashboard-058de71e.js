import{_ as J,L as re,D as ie,S as le,V as ne,C as oe,B as ce,G as de,N as me,a as ue,b as he,c as ae,P as te,I as ee,u as xe,d as pe,e as ge}from"./components-7394765f.js";import{r as c,a as be,u as Y,j as e,L as q,b as ve,c as F,d as fe}from"./react-vendor-2b1ec00c.js";import{u as Z,s as k,d as K}from"./auth-3baf3f66.js";import{m as P}from"./ui-vendor-ac3c59fb.js";const ye=c.lazy(()=>J(()=>Promise.resolve().then(()=>Ee),void 0)),je=c.lazy(()=>J(()=>Promise.resolve().then(()=>Ae),void 0)),we=c.lazy(()=>J(()=>Promise.resolve().then(()=>Oe),void 0)),Ne=c.lazy(()=>J(()=>import("./pages-52a2f3fc.js").then(l=>l.B),["assets/pages-52a2f3fc.js","assets/react-vendor-2b1ec00c.js","assets/vendor-af1abe98.js","assets/ui-vendor-ac3c59fb.js","assets/auth-3baf3f66.js","assets/supabase-vendor-3212d0ae.js","assets/components-7394765f.js"])),_e=c.lazy(()=>J(()=>Promise.resolve().then(()=>Ie),void 0)),ke=c.lazy(()=>J(()=>import("./pages-52a2f3fc.js").then(l=>l.a),["assets/pages-52a2f3fc.js","assets/react-vendor-2b1ec00c.js","assets/vendor-af1abe98.js","assets/ui-vendor-ac3c59fb.js","assets/auth-3baf3f66.js","assets/supabase-vendor-3212d0ae.js","assets/components-7394765f.js"])),Se=c.lazy(()=>J(()=>import("./pages-52a2f3fc.js").then(l=>l.K),["assets/pages-52a2f3fc.js","assets/react-vendor-2b1ec00c.js","assets/vendor-af1abe98.js","assets/ui-vendor-ac3c59fb.js","assets/auth-3baf3f66.js","assets/supabase-vendor-3212d0ae.js","assets/components-7394765f.js"])),De=()=>{const l=be(),b=Y(),{user:p,hostProfile:h,signOut:_}=Z(),[r,f]=c.useState(!1),[u,S]=c.useState(!0),E=[{path:"/dashboard",label:"Dashboard",icon:"dashboard",color:"from-blue-500 to-cyan-500"},{path:"/dashboard/bookings",label:"Bookings",icon:"event",color:"from-teal-500 to-cyan-600"},{path:"/dashboard/services",label:"My Services",icon:"security",color:"from-green-500 to-emerald-500"},{path:"/dashboard/add-service",label:"Add Service",icon:"add",color:"from-purple-500 to-pink-500"},{path:"/dashboard/kyc",label:"KYC Verification",icon:"verified_user",color:"from-yellow-500 to-orange-500"},{path:"/dashboard/account",label:"Account",icon:"person",color:"from-orange-500 to-red-500"}];c.useEffect(()=>{const x=setTimeout(()=>{S(!1)},1e3);return()=>clearTimeout(x)},[]),c.useEffect(()=>{const x=w=>{(w.ctrlKey||w.metaKey)&&w.key==="b"&&(w.preventDefault(),f(!r))};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),c.useEffect(()=>{const x=()=>{window.innerWidth<768&&f(!0)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const A=async()=>{(await _()).success&&b("/")},j=()=>h?.company_name?h.company_name:h?.full_name?h.full_name:p?.email?.split("@")[0]||"Host",D=()=>j().split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2);return u?e.jsx("div",{className:"bg-[#111714] text-white min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto mb-4 relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-[var(--primary-color)] border-t-transparent animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-white/20 border-t-transparent animate-spin",style:{animationDirection:"reverse",animationDuration:"0.8s"}})]}),e.jsx("h2",{className:"text-xl font-bold gradient-text animate-pulse",children:"Loading Dashboard..."})]})}):e.jsxs("div",{className:"bg-[#111714] text-white min-h-screen flex animate-fade-in-up",children:[e.jsxs("div",{className:`${r?"w-16":"w-64"} bg-[#0f1512] border-r border-[#1f2a24] ${r?"p-4":"p-6"} flex flex-col transition-all duration-300 ease-in-out relative overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:`absolute ${r?"top-8 left-4":"top-10 left-10"} w-32 h-32 bg-[var(--primary-color)] rounded-full blur-3xl animate-pulse`}),e.jsx("div",{className:`absolute ${r?"bottom-16 right-4":"bottom-20 right-8"} w-24 h-24 bg-emerald-500 rounded-full blur-2xl animate-pulse`,style:{animationDelay:"1s"}})]}),r&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-gradient-to-b from-[var(--primary-color)] to-blue-500 opacity-30"}),e.jsxs("div",{className:`flex items-center ${r?"justify-center":"gap-3"} mb-8 relative z-10`,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("svg",{className:`${r?"h-6 w-6":"h-8 w-8"} text-[var(--primary-color)] animate-bounce group-hover:scale-110 transition-transform`,fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 42.4379C4 42.4379 14.0962 36.0744 24 41.1692C35.0664 46.8624 44 42.2078 44 42.2078L44 7.01134C44 7.01134 35.068 11.6577 24.0031 5.96913C14.0971 0.876274 4 7.27094 4 7.27094L4 42.4379Z",fill:"currentColor"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"}),r&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 transform -translate-y-1/2 bg-[#1a241e] text-white px-2 py-1 rounded-lg text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50 border border-[#29382f]",children:"Defendo Host"})]}),!r&&e.jsx("h2",{className:"text-xl font-bold gradient-text animate-slide-in-left",children:"Defendo Host"})]}),e.jsx("button",{onClick:()=>f(!r),className:"absolute top-1/2 -translate-y-1/2 -right-3 w-9 h-9 flex items-center justify-center rounded-full bg-[#29382f] hover:bg-[#3a4a3f] border border-white/10 shadow-lg transition-all duration-200 z-20 group",title:r?"Expand sidebar":"Collapse sidebar","aria-label":r?"Expand sidebar":"Collapse sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-base text-white group-hover:scale-110 transition-transform",children:r?"chevron_right":"chevron_left"})}),e.jsx("nav",{className:`${r?"space-y-3":"space-y-2"} flex-1 relative z-10`,children:E.map((x,w)=>e.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.06,type:"spring",stiffness:300,damping:24},whileHover:{scale:1.03},children:e.jsxs(q,{to:x.path,className:`group flex items-center ${r?"justify-center px-2 py-3":"gap-3 px-4 py-3"} rounded-xl transition-all duration-300 ease-out card-animate ripple stagger-item relative ${l.pathname===x.path?"bg-white/10 ring-1 ring-[var(--primary-color)]/40 shadow-[0_6px_20px_rgba(74,222,128,0.18)] text-white":"text-white/70 hover:text-white hover:bg-white/5 hover:ring-1 hover:ring-white/10"}`,title:r?x.label:"",children:[e.jsx(P.span,{layoutId:l.pathname===x.path?"sidebar-active":void 0,className:"absolute left-0 top-0 bottom-0 w-1 bg-[var(--primary-color)]/80 rounded-r",initial:!1,animate:{opacity:l.pathname===x.path?1:0},transition:{type:"spring",stiffness:300,damping:30}}),e.jsx("div",{className:`${r?"p-2":"p-1"} rounded-lg transition-all duration-300 ${l.pathname===x.path?"bg-white/20":"group-hover:bg-white/10"}`,children:e.jsx("span",{className:`material-symbols-outlined ${r?"text-xl":"text-lg"}`,children:x.icon})}),!r&&e.jsx("span",{className:"font-medium transition-all duration-300 whitespace-nowrap",children:x.label}),l.pathname===x.path&&!r&&e.jsx(P.div,{className:"ml-auto w-2 h-2 bg-white rounded-full",animate:{scale:[1,1.3,1]},transition:{repeat:1/0,duration:1.6,ease:"easeInOut"}}),r&&l.pathname===x.path&&e.jsx("div",{className:"absolute -right-1 top-1/2 transform -translate-y-1/2 w-1 h-6 bg-white rounded-full"}),r&&e.jsxs("div",{className:"absolute left-full ml-3 top-1/2 transform -translate-y-1/2 bg-[#1a241e] text-white px-3 py-2 rounded-lg text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50 border border-[#29382f] shadow-lg",children:[x.label,e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-[#1a241e] border-l border-t border-[#29382f] rotate-45"})]})]})},x.path))}),e.jsxs("div",{className:`mt-auto ${r?"pt-4":"pt-6"} border-t border-[#29382f] relative z-10`,children:[e.jsxs("div",{className:`flex items-center ${r?"justify-center px-2 py-3":"gap-3 p-3"} rounded-lg hover:bg-[#29382f] transition-all duration-300 card-animate group cursor-pointer relative`,title:r?`${j()} - Security Provider`:"",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`${r?"w-8 h-8":"w-10 h-10"} rounded-full bg-gradient-to-br from-[var(--primary-color)] to-[#2a5a3a] flex items-center justify-center text-white font-bold ${r?"text-xs":"text-sm"} animate-scale-in`,children:D()}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-[#1a241e] animate-pulse"})]}),!r&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate group-hover:text-[var(--primary-color)] transition-colors",children:j()}),e.jsx("p",{className:"text-white/60 text-sm truncate",children:"Security Provider"})]}),r&&e.jsxs("div",{className:"absolute left-full ml-3 top-1/2 transform -translate-y-1/2 bg-[#1a241e] text-white px-3 py-2 rounded-lg text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50 border border-[#29382f] shadow-lg",children:[e.jsx("div",{className:"font-medium",children:j()}),e.jsx("div",{className:"text-xs text-white/60",children:"Security Provider"}),e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-[#1a241e] border-l border-t border-[#29382f] rotate-45"})]})]}),e.jsxs("button",{onClick:A,className:`w-full flex items-center ${r?"justify-center px-2 py-3":"gap-3 px-4 py-3"} rounded-lg text-white/70 hover:text-white hover:bg-[#29382f] transition-all duration-300 card-animate ripple group relative`,title:r?"Logout":"",children:[e.jsx("span",{className:`material-symbols-outlined ${r?"text-xl":"text-lg"} group-hover:animate-bounce`,children:"logout"}),!r&&e.jsx("span",{children:"Logout"}),r&&e.jsxs("div",{className:"absolute left-full ml-3 top-1/2 transform -translate-y-1/2 bg-[#1a241e] text-white px-3 py-2 rounded-lg text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50 border border-[#29382f] shadow-lg",children:["Logout",e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-[#1a241e] border-l border-t border-[#29382f] rotate-45"})]})]})]})]}),e.jsx("div",{className:`flex-1 p-8 animate-slide-in-right transition-all duration-300 ${r?"ml-0":""}`,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(c.Suspense,{fallback:e.jsx(re,{}),children:e.jsxs(ve,{children:[e.jsx(F,{index:!0,element:e.jsx(ye,{})}),e.jsx(F,{path:"bookings",element:e.jsx(Ne,{})}),e.jsx(F,{path:"services",element:e.jsx(je,{})}),e.jsx(F,{path:"services/:id/edit",element:e.jsx(we,{})}),e.jsx(F,{path:"add-service",element:e.jsx(_e,{})}),e.jsx(F,{path:"kyc",element:e.jsx(Se,{})}),e.jsx(F,{path:"account",element:e.jsx(ke,{})})]})})})})]})},He=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));function Ce(){const[l,b]=c.useState([]),[p,h]=c.useState({}),[_,r]=c.useState(null),[f,u]=c.useState(!0),[S,E]=c.useState(null),A=Y(),j=a=>{const m={};return a.forEach(d=>{const n=d.host_profiles?.company_name||d.host_profiles?.full_name||"Unknown Company",i=d.host_profiles?.id||d.host_id;m[i]||(m[i]={companyId:i,companyName:n,hostName:d.host_profiles?.full_name||"N/A",email:d.host_profiles?.email||"N/A",documents:[],totalDocuments:0,pendingDocuments:0,submittedDocuments:0,approvedDocuments:0,rejectedDocuments:0}),m[i].documents.push(d),m[i].totalDocuments++,d.status==="pending"?m[i].pendingDocuments++:d.status==="submitted"?m[i].submittedDocuments++:d.status==="approved"?m[i].approvedDocuments++:d.status==="rejected"&&m[i].rejectedDocuments++}),m},D=async a=>{if(!a)return null;try{const{data:m,error:d}=await k.storage.from("host-kyc-documents").list(a.split("/").slice(0,-1).join("/"),{search:a.split("/").pop()});if(d||!m||m.length===0)return null;const{data:n,error:i}=await k.storage.from("host-kyc-documents").createSignedUrl(a,3600);return i?null:n.signedUrl}catch{return null}},x=async()=>{try{u(!0);const{data:a,error:m}=await k.from("host_kyc").select("*").order("submitted_at",{ascending:!1});if(a&&a.length>0){const v=[...new Set(a.map(B=>B.status))]}const{data:d,error:n}=await k.from("host_kyc").select(`
          *,
          host_profiles!inner(
            id,
            full_name,
            email,
            company_name
          )
        `).in("status",["pending","submitted","approved","rejected"]).order("submitted_at",{ascending:!1});if(!d||d.length===0){const{data:v,error:B}=await k.from("host_kyc").select("*").in("status",["pending","submitted","approved","rejected"]).order("submitted_at",{ascending:!1});if(v&&v.length>0){const{data:I,error:z}=await k.from("host_kyc").select(`
              *,
              host_profiles(
                id,
                full_name,
                email,
                company_name
              )
            `).in("status",["pending","submitted","approved","rejected"]).order("submitted_at",{ascending:!1});if(I&&I.length>0){b(I);return}}}if(n)return;if(!d||d.length===0){b([]);return}const i=await Promise.all(d.map(async v=>{const B=await D(v.document_url);return{...v,documentUrl:B}}));b(i);const g=j(i);h(g)}catch{}finally{u(!1)}},w=async(a,m,d=null)=>{try{E(a);const{error:n}=await k.from("host_kyc").update({status:m,reviewed_by:(await k.auth.getUser()).data.user?.id,reviewed_at:new Date().toISOString(),rejection_reason:d||null}).eq("id",a);if(n){alert(`Failed to ${m} request: ${n.message}`);return}b(i=>i.map(g=>g.id===a?{...g,status:m,reviewed_at:new Date().toISOString(),rejection_reason:m==="rejected"&&d||null}:g)),h(i=>{const g={...i};return Object.keys(g).forEach(v=>{g[v]={...g[v],documents:g[v].documents.map(B=>B.id===a?{...B,status:m,reviewed_at:new Date().toISOString(),rejection_reason:m==="rejected"&&d||null}:B)}}),g}),r(i=>i&&{...i,documents:i.documents.map(g=>g.id===a?{...g,status:m,reviewed_at:new Date().toISOString(),rejection_reason:m==="rejected"&&d||null}:g)}),alert(`Request ${m} successfully!`),x()}catch(n){alert(`Error processing request: ${n.message}`)}finally{E(null)}};return c.useEffect(()=>{x()},[]),f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[var(--primary-color)]/30 border-t-[var(--primary-color)] rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60 text-lg",children:"Loading KYC requests..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[e.jsx("div",{className:"bg-black/20 backdrop-blur-xl border-b border-white/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-white/60 mt-1",children:"KYC Document Verification"})]}),e.jsxs("button",{onClick:()=>A("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/5 border border-white/10 text-white/60 rounded-lg hover:bg-white/10 transition-all duration-300",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"}),e.jsx("span",{children:"Back to Dashboard"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Total Companies"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:Object.keys(p).length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-400 text-xl",children:"business"})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Pending Documents"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:Object.values(p).reduce((a,m)=>a+m.pendingDocuments,0)})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-xl",children:"pending"})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Submitted Documents"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:Object.values(p).reduce((a,m)=>a+m.submittedDocuments,0)})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-400 text-xl",children:"check_circle"})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Total Documents"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:l.length})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-400 text-xl",children:"description"})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:_?`${_.companyName} - Documents`:"Companies with KYC Requests"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[_&&e.jsxs("button",{onClick:()=>r(null),className:"flex items-center space-x-2 px-4 py-2 bg-white/5 border border-white/10 text-white/60 rounded-lg hover:bg-white/10 transition-all duration-300",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"}),e.jsx("span",{children:"Back to Companies"})]}),e.jsxs("button",{onClick:x,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--primary-color)]/10 border border-[var(--primary-color)]/20 text-[var(--primary-color)] rounded-lg hover:bg-[var(--primary-color)]/20 transition-all duration-300",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),e.jsx("span",{children:"Refresh"})]})]})]}),Object.keys(p).length===0?e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-white/40 text-2xl",children:"check_circle"})}),e.jsx("p",{className:"text-white/60 text-lg",children:"No pending KYC requests"}),e.jsx("p",{className:"text-white/40 text-sm mt-2",children:"All requests have been processed"})]}):_?e.jsx("div",{className:"space-y-4",children:_.documents.map((a,m)=>e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[var(--primary-color)] to-teal-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"description"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white capitalize",children:a.document_type.replace("_"," ")}),e.jsx("p",{className:"text-white/60",children:"Document Type"}),e.jsxs("p",{className:"text-white/40 text-sm",children:["Submitted: ",new Date(a.submitted_at).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-white font-medium",children:"Document Preview"}),e.jsxs("button",{onClick:async()=>{const d=await D(a.document_url);d&&b(n=>n.map(i=>i.id===a.id?{...i,documentUrl:d}:i))},className:"flex items-center space-x-1 px-3 py-1 bg-white/5 border border-white/10 text-white/60 hover:text-white hover:bg-white/10 rounded-lg text-sm transition-all duration-300",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),e.jsx("span",{children:"Refresh"})]})]}),e.jsx("div",{className:"space-y-2",children:a.documentUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative border border-white/10 rounded-lg overflow-hidden",children:[e.jsx("div",{className:`absolute top-2 left-2 z-10 px-2.5 py-1 rounded-full text-xs font-semibold tracking-wide border
                                ${a.status==="approved"?"bg-green-500/10 border-green-500/20 text-green-300":""}
                                ${a.status==="rejected"?"bg-red-500/10 border-red-500/20 text-red-300":""}
                                ${a.status==="pending"?"bg-yellow-500/10 border-yellow-500/20 text-yellow-300":""}
                                ${a.status==="submitted"?"bg-blue-500/10 border-blue-500/20 text-blue-300":""}
                              `,children:a.status==="approved"?"Approved":a.status==="rejected"?"Rejected":a.status==="pending"?"Pending":a.status==="submitted"?"Submitted":a.status}),a.document_type==="company_registration"||a.document_type==="pan_card"||a.document_type==="gst_registration"||a.document_type==="trade_license"||a.document_type==="office_address_proof"?e.jsx("iframe",{src:a.documentUrl,title:"Document",className:"w-full h-64",onError:d=>{d.target.style.display="none",d.target.nextSibling.style.display="block"}}):e.jsx("img",{src:a.documentUrl,alt:"Document",className:"w-full h-64 object-cover",onError:d=>{d.target.style.display="none",d.target.nextSibling.style.display="block"}}),e.jsx("div",{className:"hidden w-full h-64 bg-white/5 flex items-center justify-center",children:e.jsx("span",{className:"text-white/40 text-sm",children:"Document preview unavailable"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("a",{href:a.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-3 py-2 bg-[var(--primary-color)]/10 border border-[var(--primary-color)]/20 text-[var(--primary-color)] rounded-lg hover:bg-[var(--primary-color)]/20 transition-all duration-300",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"download"}),e.jsx("span",{className:"text-sm",children:"Download Document"})]}),e.jsxs("a",{href:a.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-3 py-2 bg-white/5 border border-white/10 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"}),e.jsx("span",{className:"text-sm",children:"Open in New Tab"})]})]})]}):e.jsx("div",{className:"h-64 bg-white/5 border border-white/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white/40 text-sm",children:"No document available"})})})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Status:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a.status==="pending"?"bg-yellow-500/10 border border-yellow-500/20 text-yellow-400":a.status==="submitted"?"bg-blue-500/10 border border-blue-500/20 text-blue-400":a.status==="approved"?"bg-green-500/10 border border-green-500/20 text-green-400":a.status==="rejected"?"bg-red-500/10 border border-red-500/20 text-red-400":"bg-gray-500/10 border border-gray-500/20 text-gray-400"}`,children:a.status==="pending"?"Pending Review":a.status==="submitted"?"Submitted":a.status==="approved"?"Approved":a.status==="rejected"?"Rejected":a.status})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>w(a.id,"approved"),disabled:S===a.id,className:"flex items-center space-x-2 px-4 py-2 bg-green-500/10 border border-green-500/20 text-green-400 rounded-lg hover:bg-green-500/20 transition-all duration-300 disabled:opacity-50",children:[S===a.id?e.jsx("div",{className:"w-4 h-4 border-2 border-green-400/30 border-t-green-400 rounded-full animate-spin"}):e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:()=>{const d=prompt("Please provide a reason for rejection (optional):");w(a.id,"rejected",d)},disabled:S===a.id,className:"flex items-center space-x-2 px-4 py-2 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg hover:bg-red-500/20 transition-all duration-300 disabled:opacity-50",children:[S===a.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-400/30 border-t-red-400 rounded-full animate-spin"}):e.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"}),e.jsx("span",{children:"Reject"})]})]})]})})]},a.id))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(p).map((a,m)=>e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},onClick:()=>r(a),className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6 shadow-lg cursor-pointer hover:bg-white/10 hover:border-[var(--primary-color)]/30 transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[var(--primary-color)] to-teal-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"business"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white group-hover:text-[var(--primary-color)] transition-colors",children:a.companyName}),e.jsx("p",{className:"text-white/60 text-sm",children:a.hostName}),e.jsx("p",{className:"text-white/40 text-xs",children:a.email})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Total Documents:"}),e.jsx("span",{className:"text-white font-semibold",children:a.totalDocuments})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Pending:"}),e.jsx("span",{className:"text-yellow-400 font-semibold",children:a.pendingDocuments})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Submitted:"}),e.jsx("span",{className:"text-blue-400 font-semibold",children:a.submittedDocuments})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Click to view documents"}),e.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-[var(--primary-color)] transition-colors",children:"arrow_forward"})]})})]},a.companyId))})]})]})]})}const Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"})),Be=()=>{const{user:l,hostProfile:b,loading:p}=Z(),[h,_]=c.useState({totalBookings:0,activeBookings:0,completedBookings:0,monthlyRevenue:0,recentBookings:[]}),[r,f]=c.useState(!1),[u,S]=c.useState(null),[E,A]=c.useState(!1),[j,D]=c.useState(null),[x,w]=c.useState(!1);c.useEffect(()=>{},[l,b]);const a=c.useCallback(async()=>{if(!l||p){f(!1);return}try{f(!0),S(null);const n=new Date;n.setDate(1),n.setHours(0,0,0,0);const[{data:i,error:g},{data:v,error:B},{data:I,error:z},{data:H,error:G},{data:s,error:t},o]=await Promise.all([k.from("bookings").select("id").eq("provider_id",l.id),k.from("bookings").select("id").eq("provider_id",l.id).in("status",["pending","confirmed"]),k.from("bookings").select("id").eq("provider_id",l.id).eq("status","completed"),k.from("bookings").select("price, payment_status, service_type, status, date, created_at").eq("provider_id",l.id).gte("created_at",n.toISOString()).eq("status","completed").eq("payment_status","paid"),k.from("bookings").select("id, service_type, status, created_at, price, host_id:provider_id").eq("provider_id",l.id).order("created_at",{ascending:!1}).limit(5),K.getMonthlyAnalytics(l.id)]);(g||B||z||G||t)&&[g,B,z,G,t].some($=>$&&($.code==="PGRST301"||$.status===403))&&A(!0);const y=i?.length||0,T=v?.length||0,R=I?.length||0,O=H?.reduce((U,$)=>U+Number($.price||0),0)||0,C=Array.isArray(H)?H:[],L=o&&o.data?o.data:[];_({totalBookings:y,activeBookings:T,completedBookings:R,monthlyRevenue:O,recentBookings:s||[],monthlyPaidBookings:C,analytics:L})}catch{S("Failed to load dashboard data")}finally{f(!1)}},[l,p]);c.useEffect(()=>{a()},[a]),c.useEffect(()=>{if(!l?.id)return;const n=k.channel(`bookings_inserts_${l.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"bookings",filter:`provider_id=eq.${l.id}`},i=>{const g=i.new||{},v=g.date?new Date(g.date).toLocaleString():"upcoming",B=`${g.service_type||"Service"} booked for ${v}`;window.dispatchEvent(new CustomEvent("dashboard:new-notification",{detail:{id:g.id,type:"booking",title:"New Booking Received",message:B,time:"Just now",unread:!0}})),w(!0)}).subscribe();return()=>{try{k.removeChannel(n)}catch{}}},[l?.id]);const m=()=>b?.company_name?b.company_name:b?.full_name?b.full_name:l?.email?.split("@")[0]||"Host";if(p||r)return e.jsx(ie,{});if(u)return e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),e.jsx("h3",{className:"text-red-400 font-medium",children:"Dashboard Error"})]}),e.jsx("p",{className:"text-red-400/80 text-sm mb-4",children:u}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Refresh Page"})]});const d=[{label:"Total Bookings",value:h.totalBookings,icon:"event",growth:12,growthType:"increase"},{label:"Active Bookings",value:h.activeBookings,icon:"pending",growth:5,growthType:"increase"},{label:"Completed",value:h.completedBookings,icon:"check_circle",growth:8,growthType:"increase"},{label:"Monthly Revenue",value:h.monthlyRevenue,icon:"attach_money",growth:15,growthType:"increase",isCurrency:!0}];return e.jsxs("div",{className:"relative",children:[e.jsx(P.div,{className:"absolute top-0 right-0 w-96 h-96 opacity-5 pointer-events-none",animate:{scale:[1,1.1,1],rotate:[0,5,0],opacity:[.05,.1,.05]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("span",{className:"material-symbols-outlined text-[20rem] text-white",children:"shield"})}),e.jsxs(P.div,{className:"mb-8 relative z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight mb-2",children:["Welcome Back, ",m(),"!"]}),e.jsx("p",{className:"text-white/70",children:"Here's what's happening with your security services today."})]}),e.jsxs(P.button,{onClick:()=>w(!0),className:"relative p-3 rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("span",{className:"material-symbols-outlined text-white",children:"notifications"}),e.jsx(P.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0}})]})]}),E&&e.jsxs(P.div,{className:"mt-4 p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/20 text-yellow-300 text-sm",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:["Access to bookings is restricted by database policies (RLS). Use the button below to verify visibility for your account.",e.jsxs("div",{className:"mt-2",children:[e.jsxs("button",{onClick:async()=>{const{count:n,error:i}=await k.from("bookings").select("id",{count:"exact",head:!0}).eq("provider_id",l.id);D(i?null:typeof n=="number"?n:0)},className:"px-3 py-2 rounded-md bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-200",children:["Run RLS test for provider_id = ",l?.id?.slice(0,8),"…"]}),j!==null&&e.jsxs("span",{className:"ml-3",children:["Visible bookings: ",j]})]})]})]}),e.jsx(P.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.08}}},children:d.map((n,i)=>e.jsx(le,{label:n.label,value:n.value,icon:n.icon,growth:n.growth,growthType:n.growthType,index:i,isCurrency:n.isCurrency},i))}),l&&e.jsx(ne,{}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Analytics"}),e.jsx(oe,{data:h.analytics||[]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ce,{bookings:h.recentBookings})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(de,{}),e.jsxs("div",{className:"bg-[#111714] border border-white/10 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Month"}),e.jsx("span",{className:"text-white/60 text-sm",children:new Date().toLocaleString("en-US",{month:"long",year:"numeric"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[e.jsx("div",{className:"text-white/70 text-sm",children:"Paid bookings"}),e.jsx("div",{className:"font-semibold",children:(h.monthlyPaidBookings||[]).length})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsx("div",{className:"text-white/70 text-sm",children:"Revenue"}),e.jsx("div",{className:"font-semibold",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(h.monthlyRevenue||0)})]}),e.jsxs("div",{className:"mt-4 max-h-64 overflow-auto divide-y divide-white/5",children:[(h.monthlyPaidBookings||[]).slice(0,10).map(n=>e.jsxs("div",{className:"py-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium capitalize",children:n.service_type||"service"}),e.jsx("div",{className:"text-xs text-white/50",children:n.date?new Date(n.date).toLocaleDateString():(n.created_at||"").slice(0,10)})]}),e.jsxs("div",{className:"text-sm font-semibold",children:["₹",Number(n.price||0).toLocaleString("en-IN")]})]},n.id)),(h.monthlyPaidBookings||[]).length===0&&e.jsx("div",{className:"py-8 text-center text-white/50 text-sm",children:"No paid bookings yet this month."})]})]})]})]}),e.jsx(P.button,{className:"fixed bottom-6 right-6 w-14 h-14 bg-[var(--primary-color)] rounded-full shadow-2xl flex items-center justify-center z-30",whileHover:{scale:1.1,boxShadow:"0 0 30px rgba(74,222,128,0.4)"},whileTap:{scale:.9},animate:{y:[0,-4,0],boxShadow:["0 8px 30px rgba(74,222,128,0.3)","0 12px 40px rgba(74,222,128,0.4)","0 8px 30px rgba(74,222,128,0.3)"]},transition:{y:{duration:2,repeat:1/0,ease:"easeInOut"},boxShadow:{duration:2,repeat:1/0,ease:"easeInOut"}},children:e.jsx("span",{className:"material-symbols-outlined text-[#111714] text-xl",children:"add"})}),e.jsx(me,{isOpen:x,onClose:()=>w(!1)})]})},Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"})),Pe=()=>{const l=Y(),{user:b,hostProfile:p}=Z(),[h,_]=c.useState([]),[r,f]=c.useState(!0),[u,S]=c.useState(null),[E,A]=c.useState(null),[j,D]=c.useState(!1),[x,w]=c.useState(null),[a,m]=c.useState(null),d=s=>{if(!s)return{};try{const t=typeof s=="string"?JSON.parse(s):s;return t&&typeof t=="object"?t:{}}catch{return{}}},n={guards:{label:"Guards",icon:"security",color:"from-blue-500 to-cyan-500"},drones:{label:"Drones",icon:"drone",color:"from-orange-500 to-red-500"},agencies:{label:"Agencies",icon:"business",color:"from-green-500 to-emerald-500"},other:{label:"Other",icon:"more_horiz",color:"from-gray-500 to-gray-600"}};c.useEffect(()=>{(async()=>{if(b)try{f(!0),S(null);const{data:t,error:o}=await K.getHostServices(b.id);if(o){S(o.message);return}_(t||[])}catch(t){S(t.message||"Failed to fetch services")}finally{f(!1)}})()},[b]);const i=async s=>{D(!0);try{const{error:t}=await K.deleteHostService(s);if(t){S(t.message);return}_(o=>o.filter(y=>y.id!==s)),A(null)}catch(t){S(t.message||"Failed to delete service")}finally{D(!1)}},g=async s=>{const t=!s.is_active,o=t?"Activate this service? It will become visible to customers.":"Deactivate this service? It will be hidden from customers.",y=t?`

Warning: Make sure pricing and details are correct before activating.`:`

Warning: Existing bookings are unaffected; new bookings will be disabled.`;if(window.confirm(o+y))try{w(s.id),_(R=>R.map(O=>O.id===s.id?{...O,is_active:t}:O));const{error:T}=await K.updateHostService(s.id,{is_active:t});T?(_(R=>R.map(O=>O.id===s.id?{...O,is_active:s.is_active}:O)),alert("Failed to update status: "+(T.message||"Unknown error"))):window.dispatchEvent(new CustomEvent("services:changed",{detail:{id:s.id,is_active:t}}))}finally{w(null)}},v=s=>{m(s)},B=()=>{m(null)},I=h.length,z=h.filter(s=>s.is_active).length,H=h.reduce((s,t)=>s+(t.total_bookings||0),0),G=h.length>0?(h.reduce((s,t)=>s+(t.rating||0),0)/h.length).toFixed(1):0;return a?e.jsx(ue,{service:a,onBack:B,onEdit:s=>l(`/dashboard/services/${s}/edit`),onDelete:i}):e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text animate-slide-in-left",children:"My Services"}),e.jsx("p",{className:"text-white/70 mt-2 animate-slide-in-left",style:{animationDelay:"0.1s"},children:"Manage your security service offerings"})]}),e.jsxs(q,{to:"/dashboard/add-service",className:"group bg-gradient-to-r from-[var(--primary-color)] via-emerald-400 to-[#2a5a3a] text-[#111714] px-7 py-3.5 rounded-full font-bold shadow-[0_10px_30px_rgba(74,222,128,0.25)] hover:shadow-[0_18px_40px_rgba(74,222,128,0.35)] transition-all duration-300 ripple animate-slide-in-right",children:[e.jsx("span",{className:"material-symbols-outlined mr-2 group-hover:rotate-90 transition-transform duration-300",children:"add"}),"Add New Service"]})]}),u&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 backdrop-blur-sm animate-slide-in-top",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),e.jsx("p",{className:"text-red-400 text-sm",children:u})]})}),r&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-[var(--primary-color)] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-white/70",children:"Loading services..."})]})}),!r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"rounded-2xl p-4 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)] card-animate hover:shadow-[0_12px_40px_rgba(0,0,0,0.25)] transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"security"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:I})]})]})}),e.jsx("div",{className:"rounded-2xl p-4 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)] card-animate hover:shadow-[0_12px_40px_rgba(0,0,0,0.25)] transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:z})]})]})}),e.jsx("div",{className:"rounded-2xl p-4 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)] card-animate hover:shadow-[0_12px_40px_rgba(0,0,0,0.25)] transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"event"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:H})]})]})}),e.jsx("div",{className:"rounded-2xl p-4 border border-white/10 bg-white/5 backdrop-blur-md shadow-[0_8px_30px_rgba(0,0,0,0.15)] card-animate hover:shadow-[0_12px_40px_rgba(0,0,0,0.25)] transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-white",children:"star"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:G})]})]})})]}),!r&&e.jsx(e.Fragment,{children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-[var(--primary-color)] to-[#2a5a3a] rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("span",{className:"material-symbols-outlined text-[#111714] text-4xl",children:"security"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"No Services Yet"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Start by adding your first security service offering"}),e.jsxs(q,{to:"/dashboard/add-service",className:"inline-flex items-center gap-2 bg-gradient-to-r from-[var(--primary-color)] to-[#2a5a3a] text-[#111714] px-6 py-3 rounded-full font-bold hover:shadow-lg hover:shadow-[var(--primary-color)]/25 transition-all duration-300 ripple",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Add Your First Service"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:h.map((s,t)=>{const o=n[s.service_type]||n.other,y=Math.min(s.total_bookings/20*100,100),T=d(s.sub_category),R=T&&Object.keys(T).length>0,O=p?.company_name||p?.full_name||(b?.email?b.email.split("@")[0]:"Host");return e.jsxs(P.div,{className:"group relative overflow-hidden rounded-2xl p-6 border border-white/10 bg-white/5 backdrop-blur-md card-animate stagger-item hover:shadow-2xl hover:shadow-[var(--primary-color)]/15 hover:scale-[1.02] transition-all duration-300 cursor-pointer",style:{animationDelay:`${t*.1}s`},onClick:C=>{C.target.closest("button")||v(s)},whileHover:{y:-2},whileTap:{scale:.98},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${o.color} opacity-5 group-hover:opacity-10 transition-opacity duration-300`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"mb-4 rounded-xl overflow-hidden shadow-lg",children:e.jsx(he,{images:s.images||[],className:"w-full"})}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br ${o.color} shadow-lg`,children:e.jsx("span",{className:"material-symbols-outlined text-white text-xl",children:o.icon})}),e.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-[var(--primary-color)] transition-colors",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>g(s),disabled:x===s.id,className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${s.is_active?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-gray-500/20 text-gray-400 hover:bg-gray-500/30"} ${x===s.id?"opacity-60 cursor-not-allowed":""}`,title:s.is_active?"Click to deactivate":"Click to activate",children:x===s.id?"Updating...":s.is_active?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-sm",children:"star"}),e.jsx("span",{className:"text-white text-sm font-medium",children:s.rating||0})]})]})]}),e.jsx("p",{className:"text-white/70 mb-6 leading-relaxed",children:s.description}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Type:"}),e.jsx("span",{className:"text-white font-medium",children:o.label})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Company:"}),e.jsx("span",{className:"text-white font-medium",children:O})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Bookings:"}),e.jsx("span",{className:"text-white font-medium",children:s.total_bookings||0})]}),s.city&&s.state&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Location:"}),e.jsxs("span",{className:"text-white font-medium",children:[s.city,", ",s.state]})]})]}),s.specializations&&s.specializations.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Specializations:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.specializations.slice(0,3).map((C,L)=>e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-full text-xs text-white/80",children:C},L)),s.specializations.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-white/10 rounded-full text-xs text-white/80",children:["+",s.specializations.length-3," more"]})]})]}),(()=>{const C=d(s.sub_category);return C&&Object.keys(C).length>0})()&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Subcategories & Pricing:"}),e.jsx("div",{className:"space-y-2",children:Object.entries(d(s.sub_category)).map(([C,L])=>e.jsxs("div",{className:"flex justify-between items-center bg-white/5 rounded-lg px-3 py-2",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:L.label}),e.jsxs("span",{className:"text-[var(--primary-color)] font-bold text-sm",children:[L.currency," ",L.price_per_hour,"/hr"]})]},C))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/70 mb-2",children:[e.jsx("span",{children:"Performance"}),e.jsxs("span",{children:[Math.round(y),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:`h-2 bg-gradient-to-r ${o.color} rounded-full transition-all duration-1000 ease-out`,style:{width:`${y}%`}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>v(s),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all duration-300 ripple group ${R?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:shadow-lg hover:shadow-blue-500/25":"bg-gradient-to-r from-[var(--primary-color)] to-[#2a5a3a] text-[#111714] hover:shadow-lg hover:shadow-[var(--primary-color)]/25"}`,children:[e.jsx("span",{className:`material-symbols-outlined text-sm mr-1 group-hover:scale-110 transition-transform ${R?"text-white":""}`,children:R?"visibility":"add"}),R?"View Details":"View Service"]}),e.jsxs("button",{onClick:C=>{C.stopPropagation(),l(`/dashboard/services/${s.id}/edit`)},className:"flex-1 bg-gradient-to-r from-yellow-500 to-orange-500 text-white py-2 px-4 rounded-lg font-medium hover:shadow-lg hover:shadow-yellow-500/25 transition-all duration-300 ripple group",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-1 group-hover:rotate-12 transition-transform",children:"edit"}),"Edit"]}),e.jsxs("button",{onClick:C=>{C.stopPropagation(),A(s)},className:"flex-1 bg-red-500/20 text-red-400 py-2 px-4 rounded-lg font-medium hover:bg-red-500/30 hover:shadow-lg hover:shadow-red-500/25 transition-all duration-300 ripple group",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-1 group-hover:scale-110 transition-transform",children:"delete"}),"Delete"]})]})]})]},s.id)})})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-up",children:e.jsx("div",{className:"bg-gradient-to-br from-[#1a241e] to-[#29382f] rounded-2xl p-6 border border-[#29382f] max-w-md w-full mx-4 animate-scale-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-red-400 text-2xl",children:"warning"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Delete Service"}),e.jsxs("p",{className:"text-white/70 mb-6",children:['Are you sure you want to delete "',E.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>A(null),className:"flex-1 bg-[#29382f] text-white py-2 px-4 rounded-lg font-medium hover:bg-[#3a4a3f] transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>i(E.id),disabled:j,className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 ripple",children:j?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):"Delete"})]})]})})})]})},Ae=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),Te=()=>{const{id:l}=fe(),b=Y(),[p,h]=c.useState(null),[_,r]=c.useState(!0),[f,u]=c.useState(!1),[S,E]=c.useState(null),[A,j]=c.useState(""),[D,x]=c.useState(""),w=`{
  "security_guard": { "label": "Security Guard", "price_per_hour": 200, "availability": 10, "images": [] }
}`;c.useEffect(()=>{(async()=>{const{data:i,error:g}=await K.getHostServiceById(l);g&&E(g.message),h(i||null);try{const v=i?.sub_category;if(v){const B=typeof v=="string"?JSON.parse(v):v;j(JSON.stringify(B,null,2))}else j("")}catch{j(String(i?.sub_category||""))}r(!1)})()},[l]);const a=n=>{const{name:i,value:g}=n.target;h(v=>({...v,[i]:g}))},m=()=>{h(n=>({...n,is_active:!n.is_active}))},d=async()=>{try{u(!0),E(null),x("");let n=null;if(A&&A.trim().length>0)try{const v=JSON.parse(A);n=JSON.stringify(v)}catch{x("Invalid JSON in subcategories");return}else n=null;const i={service_name:p.service_name,description:p.description,city:p.city,state:p.state,is_active:p.is_active,sub_category:n},{error:g}=await K.updateHostService(l,i);if(g){E(g.message);return}b("/dashboard/services")}finally{u(!1)}};return _?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-6 h-6 border-2 border-[var(--primary-color)] border-t-transparent rounded-full animate-spin"})}):p?e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Edit Service"}),e.jsx("p",{className:"text-white/70 mt-1",children:"Update your service details"})]}),S&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:e.jsx("p",{className:"text-red-400 text-sm",children:S})}),e.jsx(ae,{className:"max-w-2xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Service Name"}),e.jsx("input",{name:"service_name",value:p.service_name||"",onChange:a,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Description"}),e.jsx("textarea",{name:"description",rows:4,value:p.description||"",onChange:a,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Subcategories (JSON)"}),D?e.jsx("span",{className:"text-red-400 text-xs",children:D}):null]}),e.jsx("textarea",{rows:10,value:A,onChange:n=>{j(n.target.value),D&&x("")},placeholder:w,className:"w-full font-mono text-sm px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white min-h-[200px]"}),e.jsx("p",{className:"text-white/50 text-xs",children:"Tip: Provide valid JSON. Leave empty to remove subcategories."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"State"}),e.jsx("input",{name:"state",value:p.state||"",onChange:a,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"City"}),e.jsx("input",{name:"city",value:p.city||"",onChange:a,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:!!p.is_active,onChange:m,className:"w-4 h-4"}),e.jsx("span",{className:"text-white",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(te,{onClick:d,disabled:f,children:f?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>b("/dashboard/services"),className:"bg-[#29382f] text-white py-3 px-6 rounded-lg font-bold hover:bg-[#3a4a3f] transition-all duration-300",children:"Cancel"})]})]})})]}):e.jsx("div",{className:"text-white/70",children:"Service not found"})},Oe=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"}));async function se(){try{if(typeof navigator<"u"&&navigator.onLine===!1)return{success:!1,error:new Error("offline")};const{data:{user:l},error:b}=await k.auth.getUser();if(b||!l)return{success:!1,error:b||new Error("no-user")};const{data:p,error:h}=await k.storage.listBuckets();if(h)return{success:!1,error:h};const _=p?.find(r=>r.name==="guard_services");if(_){const{data:r,error:f}=await k.storage.from("guard_services").list("",{limit:10})}else{const{data:r,error:f}=await k.storage.from("guard_services").list("",{limit:1})}return{success:!0,buckets:p,guardServicesExists:!!_,user:l?.id}}catch(l){return{success:!1,error:l}}}async function Re(){try{const l=new File(["test content"],"test.txt",{type:"text/plain"}),{data:b,error:p}=await k.storage.from("guard_services").upload("test/test.txt",l);return p?{success:!1,error:p}:(await k.storage.from("guard_services").remove(["test/test.txt"]),{success:!0,data:b})}catch(l){return{success:!1,error:l}}}typeof window<"u"&&navigator.onLine&&se().then(l=>{l&&l.success&&l.guardServicesExists&&Re()}).catch(()=>{});const Me=()=>{const l=Y(),{user:b,hostProfile:p}=Z(),[h,_]=c.useState(!1),[r,f]=c.useState(null),[u,S]=c.useState({name:"",description:"",service_type:"",state:"",city:"",specializations:"",equipment_included:"",is_active:!0}),[E,A]=c.useState([]),[j,D]=c.useState({}),[x,w]=c.useState({name:"",price:""}),a=[{value:"guards",label:"Guards"},{value:"drones",label:"Drones"},{value:"agencies",label:"Agencies"}],m={guards:[{value:"security_guard",label:"Security Guard"},{value:"security_supervisor",label:"Security Supervisor"},{value:"male_bouncer",label:"Male Bouncer"},{value:"female_bouncer",label:"Female Bouncer"},{value:"other",label:"Other (Custom)"}],drones:[{value:"surveillance_drone",label:"Surveillance Drone"},{value:"patrol_drone",label:"Patrol Drone"},{value:"event_monitoring",label:"Event Monitoring"},{value:"other",label:"Other (Custom)"}],agencies:[{value:"security_agency",label:"Security Agency"},{value:"investigation_agency",label:"Investigation Agency"},{value:"consulting_agency",label:"Security Consulting"},{value:"other",label:"Other (Custom)"}]},d=[{value:"Andhra Pradesh",label:"Andhra Pradesh"},{value:"Arunachal Pradesh",label:"Arunachal Pradesh"},{value:"Assam",label:"Assam"},{value:"Bihar",label:"Bihar"},{value:"Chhattisgarh",label:"Chhattisgarh"},{value:"Goa",label:"Goa"},{value:"Gujarat",label:"Gujarat"},{value:"Haryana",label:"Haryana"},{value:"Himachal Pradesh",label:"Himachal Pradesh"},{value:"Jharkhand",label:"Jharkhand"},{value:"Karnataka",label:"Karnataka"},{value:"Kerala",label:"Kerala"},{value:"Madhya Pradesh",label:"Madhya Pradesh"},{value:"Maharashtra",label:"Maharashtra"},{value:"Manipur",label:"Manipur"},{value:"Meghalaya",label:"Meghalaya"},{value:"Mizoram",label:"Mizoram"},{value:"Nagaland",label:"Nagaland"},{value:"Odisha",label:"Odisha"},{value:"Punjab",label:"Punjab"},{value:"Rajasthan",label:"Rajasthan"},{value:"Sikkim",label:"Sikkim"},{value:"Tamil Nadu",label:"Tamil Nadu"},{value:"Telangana",label:"Telangana"},{value:"Tripura",label:"Tripura"},{value:"Uttar Pradesh",label:"Uttar Pradesh"},{value:"Uttarakhand",label:"Uttarakhand"},{value:"West Bengal",label:"West Bengal"},{value:"Delhi",label:"Delhi"},{value:"Jammu and Kashmir",label:"Jammu and Kashmir"},{value:"Ladakh",label:"Ladakh"},{value:"Puducherry",label:"Puducherry"},{value:"Chandigarh",label:"Chandigarh"},{value:"Andaman and Nicobar Islands",label:"Andaman and Nicobar Islands"},{value:"Dadra and Nagar Haveli and Daman and Diu",label:"Dadra and Nagar Haveli and Daman and Diu"},{value:"Lakshadweep",label:"Lakshadweep"}],n={"Andhra Pradesh":["Visakhapatnam","Vijayawada","Guntur","Nellore","Kurnool","Tirupati","Kadapa","Anantapur","Chittoor","Rajahmundry"],"Arunachal Pradesh":["Itanagar","Naharlagun","Pasighat","Tezpur","Dibrugarh","Tinsukia","Jorhat","Sibsagar","North Lakhimpur","Bongaigaon"],Assam:["Guwahati","Silchar","Dibrugarh","Jorhat","Nagaon","Tinsukia","Tezpur","Bongaigaon","Dhubri","Diphu"],Bihar:["Patna","Gaya","Bhagalpur","Muzaffarpur","Darbhanga","Purnia","Arrah","Begusarai","Katihar","Munger"],Chhattisgarh:["Raipur","Bhilai","Bilaspur","Korba","Rajnandgaon","Durg","Raigarh","Ambikapur","Mahasamund","Bastar"],Goa:["Panaji","Margao","Vasco da Gama","Mapusa","Ponda","Mormugao","Bicholim","Sanguem","Canacona","Pernem"],Gujarat:["Ahmedabad","Surat","Vadodara","Rajkot","Bhavnagar","Jamnagar","Junagadh","Gandhinagar","Nadiad","Morbi"],Haryana:["Faridabad","Gurgaon","Panipat","Ambala","Yamunanagar","Rohtak","Hisar","Karnal","Sonipat","Panchkula"],"Himachal Pradesh":["Shimla","Dharamshala","Solan","Mandi","Palampur","Kullu","Manali","Chamba","Baddi","Una"],Jharkhand:["Ranchi","Jamshedpur","Dhanbad","Bokaro","Deoghar","Phusro","Hazaribagh","Giridih","Ramgarh","Medininagar"],Karnataka:["Bangalore","Mysore","Hubli","Mangalore","Belgaum","Gulbarga","Davanagere","Bellary","Bijapur","Shimoga"],Kerala:["Thiruvananthapuram","Kochi","Kozhikode","Thrissur","Kollam","Palakkad","Malappuram","Kannur","Kasaragod","Alappuzha"],"Madhya Pradesh":["Bhopal","Indore","Gwalior","Jabalpur","Ujjain","Sagar","Dewas","Satna","Ratlam","Rewa"],Maharashtra:["Mumbai","Pune","Nagpur","Thane","Nashik","Aurangabad","Solapur","Amravati","Kolhapur","Sangli"],Manipur:["Imphal","Thoubal","Bishnupur","Churachandpur","Senapati","Tamenglong","Chandel","Ukhrul","Kakching","Jiribam"],Meghalaya:["Shillong","Tura","Jowai","Nongstoin","Baghmara","Williamnagar","Nongpoh","Mairang","Khliehriat","Resubelpara"],Mizoram:["Aizawl","Lunglei","Saiha","Champhai","Kolasib","Serchhip","Lawngtlai","Mamit","Saitual","Hnahthial"],Nagaland:["Kohima","Dimapur","Mokokchung","Tuensang","Wokha","Mon","Phek","Zunheboto","Kiphire","Longleng"],Odisha:["Bhubaneswar","Cuttack","Rourkela","Berhampur","Sambalpur","Puri","Balasore","Bhadrak","Baripada","Jharsuguda"],Punjab:["Ludhiana","Amritsar","Jalandhar","Patiala","Bathinda","Mohali","Firozpur","Batala","Pathankot","Moga"],Rajasthan:["Jaipur","Jodhpur","Udaipur","Kota","Bikaner","Ajmer","Bharatpur","Alwar","Bhilwara","Ganganagar"],Sikkim:["Gangtok","Namchi","Mangan","Gyalshing","Singtam","Rangpo","Jorethang","Pakyong","Ravangla","Lachen"],"Tamil Nadu":["Chennai","Coimbatore","Madurai","Tiruchirappalli","Salem","Tirunelveli","Tiruppur","Erode","Vellore","Thoothukkudi"],Telangana:["Hyderabad","Warangal","Nizamabad","Khammam","Karimnagar","Ramagundam","Mahbubnagar","Nalgonda","Adilabad","Suryapet"],Tripura:["Agartala","Dharmanagar","Udaipur","Ambassa","Kailashahar","Belonia","Khowai","Teliamura","Sabroom","Amarpur"],"Uttar Pradesh":["Lucknow","Kanpur","Agra","Varanasi","Meerut","Allahabad","Bareilly","Ghaziabad","Moradabad","Aligarh"],Uttarakhand:["Dehradun","Haridwar","Roorkee","Kashipur","Rudrapur","Haldwani","Rishikesh","Ramnagar","Pithoragarh","Srinagar"],"West Bengal":["Kolkata","Asansol","Siliguri","Durgapur","Bardhaman","Malda","Baharampur","Habra","Kharagpur","Shantipur"],Delhi:["New Delhi","Central Delhi","East Delhi","North Delhi","North East Delhi","North West Delhi","Shahdara","South Delhi","South East Delhi","South West Delhi","West Delhi"],"Jammu and Kashmir":["Srinagar","Jammu","Anantnag","Baramulla","Sopore","Kathua","Udhampur","Punch","Rajauri","Doda"],Ladakh:["Leh","Kargil","Drass","Nubra","Zanskar","Changthang","Suru","Sham","Nubra Valley","Hemis"],Puducherry:["Puducherry","Karaikal","Mahe","Yanam"],Chandigarh:["Chandigarh"],"Andaman and Nicobar Islands":["Port Blair","Diglipur","Mayabunder","Rangat","Hut Bay","Car Nicobar","Nancowry","Katchal","Teressa","Campbell Bay"],"Dadra and Nagar Haveli and Daman and Diu":["Silvassa","Daman","Diu"],Lakshadweep:["Kavaratti","Agatti","Amini","Andrott","Kadmat","Kalpeni","Kiltan","Minicoy","Chetlat","Bitra"]},i=t=>{const{name:o,value:y,type:T,checked:R}=t.target;S(O=>({...O,[o]:T==="checkbox"?R:y,...o==="state"&&{city:""},...o==="service_type"&&{subcategories:{}}})),o==="service_type"&&(D({}),w({name:"",price:""})),r&&f(null)},g=(t,o)=>{D(y=>{const T={...y};return o?T[t]={selected:!0,availability:"",images:[]}:delete T[t],T})},v=(t,o)=>{D(y=>({...y,[t]:{...y[t],availability:o}}))},B=(t,o)=>{D(y=>({...y,[t]:{...y[t],images:o}}))},I=(t,o)=>{D(y=>({...y,[t]:{...y[t],pricingEnabled:o,price:o&&y[t]?.price||""}}))},z=(t,o)=>{D(y=>({...y,[t]:{...y[t],price:o}}))},H=(t,o)=>{w(y=>({...y,[t]:o}))},G=async t=>{t.preventDefault(),_(!0),f(null);try{if(!p?.verified){f("Your company is not verified yet. Please wait for admin approval before adding services.");return}const{data:o,error:y}=await K.getHostServices(b.id);if(y){f("Failed to check existing services. Please try again.");return}const T=o?.find(N=>N.service_type===u.service_type);if(T){f(`You already have a ${u.service_type} service named "${T.service_name}". Each service type can only be added once.`);return}const R=u.specializations.split(",").map(N=>N.trim()).filter(N=>N.length>0),O=u.equipment_included.split(",").map(N=>N.trim()).filter(N=>N.length>0),C={};if(Object.entries(j).forEach(([N,M])=>{if(M?.selected){const Q=m[u.service_type]?.find(V=>V.value===N)?.label||N;C[N]={label:Q,enabled:!0,availability:Number(M.availability||0)||0,images:[]},M.pricingEnabled&&M.price&&(C[N].price_per_hour=parseFloat(M.price))}}),u.service_type==="guards"&&!Object.values(C).some(M=>M.enabled&&M.availability>0)){f("Please enable at least one guard type and set availability > 0.");return}const L={service_name:u.name,description:u.description,service_type:u.service_type,state:u.state,city:u.city,specializations:R,equipment_included:O,sub_category:JSON.stringify(C),is_active:u.is_active},{data:U,error:$}=await K.addHostService(b.id,L);if($){f($.message);return}if(E.length>0)try{const N=await xe(U[0].id,b.id,E);await pe(U[0].id,N)}catch(N){f(`Service created but image upload failed: ${N.message}`)}if(u.service_type==="guards"){const N={...C};let M=0;for(const[V,W]of Object.entries(j))if(W?.selected&&Array.isArray(W.images)&&W.images.length>0)try{const X=await ge(U[0].id,b.id,V,W.images);N[V]&&(N[V].images=X,M+=X.length)}catch{}const{error:Q}=await K.updateHostService(U[0].id,{sub_category:JSON.stringify(N)})}l("/dashboard/services")}catch(o){f(o.message||"Failed to add service")}finally{_(!1)}},s=!p?.verified;return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text animate-slide-in-left",children:"Add New Service"}),e.jsx("p",{className:"text-white/70 mt-2 animate-slide-in-left",style:{animationDelay:"0.1s"},children:"Create a new security service offering"})]})}),s&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-400",children:"error"}),e.jsx("p",{className:"text-yellow-300 text-sm",children:"Your company is not verified yet. You cannot add services until an admin verifies your account."})]})}),r&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 backdrop-blur-sm animate-slide-in-top",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-red-400",children:"error"}),e.jsx("p",{className:"text-red-400 text-sm",children:r})]})}),e.jsx(ae,{className:"max-w-2xl",children:e.jsxs("form",{onSubmit:G,className:"space-y-6",children:[e.jsxs("fieldset",{disabled:s,className:s?"opacity-60 pointer-events-none":"",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-white",children:"Service Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:i,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300",placeholder:"e.g., Event Security, Bodyguard Protection",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-white",children:"Description *"}),e.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:i,rows:4,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 resize-none",placeholder:"Describe your service in detail, including what clients can expect...",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"service_type",className:"block text-sm font-medium text-white",children:"Service Type *"}),e.jsxs("select",{id:"service_type",name:"service_type",value:u.service_type,onChange:i,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300",required:!0,children:[e.jsx("option",{value:"",children:"Select service type"}),a.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),u.service_type&&m[u.service_type]&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Select Subcategories with Pricing *"}),e.jsxs("div",{className:"space-y-4 bg-[#1a241e] border border-[#29382f] rounded-lg p-4",children:[m[u.service_type].map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:`subcategory_${t.value}`,checked:j[t.value]?.selected||!1,onChange:o=>g(t.value,o.target.checked),className:"w-4 h-4 text-[var(--primary-color)] bg-[#111714] border-[#29382f] rounded focus:ring-[var(--primary-color)] focus:ring-2"}),e.jsx("label",{htmlFor:`subcategory_${t.value}`,className:"text-white text-sm font-medium",children:t.label})]}),j[t.value]?.selected&&e.jsxs("div",{className:"ml-7 space-y-3",children:[t.value==="other"&&e.jsx("input",{type:"text",placeholder:"Custom subcategory name",value:x.name,onChange:o=>H("name",o.target.value),className:"w-full px-3 py-2 bg-[#111714] border border-[#29382f] rounded text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]/20 transition-all duration-300 text-sm"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-white/80 text-sm whitespace-nowrap",children:"Availability"}),e.jsx("input",{type:"number",min:"0",placeholder:"0",value:j[t.value]?.availability||"",onChange:o=>v(t.value,o.target.value),className:"flex-1 px-3 py-2 bg-[#111714] border border-[#29382f] rounded text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]/20 transition-all duration-300 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/80 text-sm block mb-1",children:"Images"}),e.jsx(ee,{images:j[t.value]?.images||[],onImagesChange:o=>B(t.value,o),maxImages:3,disabled:h})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:`pricing_${t.value}`,checked:j[t.value]?.pricingEnabled||!1,onChange:o=>I(t.value,o.target.checked),className:"w-4 h-4 text-[var(--primary-color)] bg-[#111714] border-[#29382f] rounded focus:ring-[var(--primary-color)] focus:ring-2"}),e.jsx("label",{htmlFor:`pricing_${t.value}`,className:"text-white text-sm",children:"Enable hourly pricing"}),j[t.value]?.pricingEnabled&&e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("span",{className:"text-white/80 text-sm",children:"₹"}),e.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Price / hour",value:j[t.value]?.price||"",onChange:o=>z(t.value,o.target.value),className:"w-32 px-3 py-2 bg-[#111714] border border-[#29382f] rounded text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]/20 transition-all duration-300 text-sm"}),e.jsx("span",{className:"text-white/60 text-sm",children:"/hour"})]})]})]})]},t.value)),e.jsx("div",{className:"mt-4 p-3 bg-[#111714] rounded-lg border border-[#29382f]/50",children:e.jsx("p",{className:"text-white/70 text-xs",children:"💡 Select the subcategories you offer and set individual pricing for each. This allows clients to choose specific services with transparent pricing."})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-white",children:"State *"}),e.jsxs("select",{id:"state",name:"state",value:u.state,onChange:i,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300",required:!0,children:[e.jsx("option",{value:"",children:"Select State"}),d.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-white",children:"City *"}),e.jsxs("select",{id:"city",name:"city",value:u.city,onChange:i,disabled:!u.state,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",required:!0,children:[e.jsx("option",{value:"",children:"Select City"}),u.state&&n[u.state]?.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"specializations",className:"block text-sm font-medium text-white",children:"Specializations"}),e.jsx("input",{type:"text",id:"specializations",name:"specializations",value:u.specializations,onChange:i,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300",placeholder:"e.g., Crowd Control, Access Control, Emergency Response (comma-separated)"}),e.jsx("p",{className:"text-xs text-white/60",children:"Separate multiple specializations with commas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"equipment_included",className:"block text-sm font-medium text-white",children:"Equipment Included"}),e.jsx("input",{type:"text",id:"equipment_included",name:"equipment_included",value:u.equipment_included,onChange:i,className:"w-full px-4 py-3 bg-[#1a241e] border border-[#29382f] rounded-lg text-white placeholder-gray-500 focus:border-[var(--primary-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 transition-all duration-300",placeholder:"e.g., Radio Communication, First Aid Kit, Flashlight (comma-separated)"}),e.jsx("p",{className:"text-xs text-white/60",children:"Separate multiple equipment items with commas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white",children:"Service Images"}),e.jsx(ee,{images:E,onImagesChange:A,maxImages:5,disabled:h})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:u.is_active,onChange:i,className:"h-4 w-4 text-[var(--primary-color)] bg-[#1a241e] border-[#29382f] rounded focus:ring-[var(--primary-color)] focus:ring-2"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-white",children:"Service is currently available for booking"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:[e.jsx("h3",{className:"text-yellow-400 font-bold mb-2",children:"🔧 Debug Tools"}),e.jsx("button",{type:"button",onClick:se,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"Check Storage Buckets"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(te,{type:"submit",disabled:h||s,className:"flex-1",children:h?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-[#111714] border-t-transparent rounded-full animate-spin"}),"Adding Service..."]}):"Add Service"}),e.jsx("button",{type:"button",onClick:()=>l("/dashboard/services"),className:"flex-1 bg-[#29382f] text-white py-3 px-6 rounded-lg font-bold hover:bg-[#3a4a3f] transition-all duration-300 ripple",children:"Cancel"})]})]})})]})},Ie=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"}));export{Ue as A,He as D};
